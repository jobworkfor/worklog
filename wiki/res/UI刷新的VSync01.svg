<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="7871px" height="4013px" viewBox="-0.5 -0.5 7871 4013" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-11-01T11:04:04.350Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36&quot; etag=&quot;XIG__FszmItIP5Rg-60C&quot; version=&quot;20.5.1&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;QllvGxO3ejY0qV6oHFOT&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="10" y="2520" width="650" height="720" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 647px; height: 1px; padding-top: 2520px; margin-left: 15px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java</span><span style="font-size: 8.3pt;"><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">private final class </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">FrameDisplayEventReceiver </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">extends </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">DisplayEventReceiver<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">implements </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Runnable {<br />    <font color="#000080"><b>...</b></font></span></font><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;"><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 115, 191); font-weight: bold; font-style: italic;">TODO(b/116025192): physicalDisplayId is ignored because SF only emits VSYNC events for<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 115, 191); font-weight: bold; font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// the internal display and DisplayEventReceiver#scheduleVsync only allows requesting VSYNC<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    // for the internal display implicitly.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">@Override<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">onVsync(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">timestampNanos, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">physicalDisplayId, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">int </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">frame,<br />            VsyncEventData vsyncEventData) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">try </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">{<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>            // 支持 systrace 调试<br /></i></font></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">            </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">isTagEnabled</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_VIEW</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">)) {<br />                Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">traceBegin</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_VIEW</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">,<br />                        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Choreographer#onVsync " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ vsyncEventData.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">id</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            }<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// Post the vsync event to the Handler.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // The idea is to prevent incoming vsync events from completely starving<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // the message queue.  If there are no messages in the queue with timestamps<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // earlier than the frame time, then the vsync event will be processed immediately.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // Otherwise, messages that predate the vsync event will be handled first.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">now = System.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">nanoTime</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">();<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(timestampNanos &gt; now) {<br />                Log.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">w</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Frame time is " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ ((timestampNanos - now) * </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0.000001f</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">)<br />                        + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" ms in the future!  Check that graphics HAL is generating vsync "<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                        </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"timestamps using the correct timebase."</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />                timestampNanos = now;<br />            }<br /><br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHavePendingVsync</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                Log.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">w</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Already have a pending vsync event.  There should only be "<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                        </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"one at a time."</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">else </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHavePendingVsync </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />            }<br /><br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTimestampNanos </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= timestampNanos;<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFrame </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= frame;<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLastVsyncEventData </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= vsyncEventData;<br />            Message msg = Message.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">obtain</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandler</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">this</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;"><font face="Consolas, monospace">);<br /></font><font face="consolas" color="#ff0000"><i>            // 设置成异步消息，因为之前设置了同步屏障，当前状态只处理异步消息<br /></i></font><font face="Consolas, monospace">            msg.setAsynchronous(</font></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">);<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>            // 发送一个 callback 消息，执行本类的 run() 方法<br /></i></font></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">            </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandler</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">.</span><span style="background-color: rgb(204, 204, 204);">sendMessageAtTime</span><span style="background-color: rgb(255, 255, 255);">(msg, timestampNanos / TimeUtils.</span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">NANOS_PER_MS</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">finally </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />            Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">traceEnd</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_VIEW</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        }<br />    }</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="15" y="2532" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.javaprivate final class Frame...</text></switch></g><rect x="0" y="20" width="710" height="200" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 707px; height: 1px; padding-top: 20px; margin-left: 5px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style="background-color: rgb(255, 255, 255);"><pre style=""><font face="consolas, monospace"><font><span style="font-size: 11.0667px;">at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)<br />at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)<br />at java.lang.reflect.Method.invoke(Method.java:-1)<br />at android.app.ActivityThread.main(ActivityThread.java:7870)<br />at android.os.Looper.loop(Looper.java:288)<br />at android.os.Looper.loopOnce(Looper.java:201)<br />at android.os.Handler.dispatchMessage(Handler.java:106)<br />at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2253)<br />at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:97)<br />at android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:176)<br />at android.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:45)<br />at android.app.servertransaction.ResumeActivityItem.execute(ResumeActivityItem.java:54)</span></font><span style="font-size: 8.3pt;"><br /></span></font></pre></pre></pre></pre></div></div></div></foreignObject><text x="5" y="32" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)...</text></switch></g><rect x="0" y="0" width="710" height="20" fill="#ffff00" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 712px; height: 1px; padding-top: 10px; margin-left: 0px;"><div data-drawio-colors="color: #FF0080; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 0, 128); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">【进程信息】com.blackshark.mola@main：发起进程</div></div></div></foreignObject><text x="0" y="14" fill="#FF0080" font-family="Helvetica" font-size="12px">【进程信息】com.blackshark.mola@main：发起进程</text></switch></g><rect x="10" y="220" width="650" height="1710" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 647px; height: 1px; padding-top: 220px; margin-left: 15px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:4857/4910)</span><span style="font-size: 8.3pt;"><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">@Override<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">handleResumeActivity(ActivityClientRecord r, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">boolean </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">finalStateRequest,<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">boolean </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">isForward, String reason) {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// If we are getting ready to gc after going to the background, well<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    // we are back active so skip it.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">unscheduleGcIdler();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mSomeActivitiesChanged </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 115, 191); font-weight: bold; font-style: italic;">TODO Push resumeArgs into the activity for consideration<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 115, 191); font-weight: bold; font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// skip below steps for double-resume and r.mFinish = true case.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">(!</span><span style="background-color: rgb(204, 204, 204);">performResumeActivity</span><span style="background-color: rgb(255, 255, 255);">(r, finalStateRequest, reason)) {<br />        </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    }<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mActivitiesToBeDestroyed</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.containsKey(r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">token</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">)) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// Although the activity is resumed, it is going to be destroyed. So the following<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // UI operations are unnecessary and also prevents exception because its token may<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // be gone that window manager cannot recognize it. All necessary cleanup actions<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // performed below will be done while handling destruction.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    }<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Activity a = r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">localLOGV</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        Slog.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">v</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Resume " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ r + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" started activity: " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ a.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mStartedActivity<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">                </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">", hideForNow: " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">hideForNow </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">", finished: " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ a.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFinished</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final int </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">forwardBit = isForward<br />            ? WindowManager.LayoutParams.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">SOFT_INPUT_IS_FORWARD_NAVIGATION </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">: </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// If the window hasn't yet been added to the window manager,<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    // and this guy didn't finish itself or start another activity,<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    // then go ahead and add the window.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">boolean </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">willBeVisible = !a.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mStartedActivity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!willBeVisible) {<br />        willBeVisible = ActivityClient.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">getInstance</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">().willActivityBeVisible(<br />                a.getActivityToken());<br />    }<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">window </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">== </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp;&amp; !a.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFinished </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp;&amp; willBeVisible) {<br />        r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">window </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.getWindow();<br />        View decor = r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">window</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.getDecorView();<br />        decor.setVisibility(View.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">INVISIBLE</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        ViewManager wm = a.getWindowManager();<br />        WindowManager.LayoutParams l = r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">window</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.getAttributes();<br />        a.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mDecor </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= decor;<br />        l.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">type </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= WindowManager.LayoutParams.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TYPE_BASE_APPLICATION</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        l.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">softInputMode </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">|= forwardBit;<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mPreserveWindow</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            a.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mWindowAdded </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />            r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mPreserveWindow </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// Normally the ViewRoot sets up callbacks with the Activity<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // in addView-&gt;ViewRootImpl#setView. If we are instead reusing<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // the decor view we have to notify the view root that the<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // callbacks may have changed.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">ViewRootImpl impl = decor.getViewRootImpl();<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(impl != </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                impl.notifyChildRebuilt();<br />            }<br />        }<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(a.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mVisibleFromClient</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!a.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mWindowAdded</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                a.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mWindowAdded </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">;<br />                wm.</span><span style="background-color: rgb(204, 204, 204);">addView</span><span style="background-color: rgb(255, 255, 255);">(decor, l);<br />            } </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">else </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// The activity will get a callback for this {@link LayoutParams} change<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">                // earlier. However, at that time the decor will not be set (this is set<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">                // in this method), so no action will be taken. This call ensures the<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">                // callback occurs with the decor set.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">                </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">a.onWindowAttributesChanged(l);<br />            }<br />        }<br /><br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// If the window has already been added, but during resume<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // we started another activity, then don't yet make the<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // window visible.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">} </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">else if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!willBeVisible) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">localLOGV</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) Slog.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">v</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Launch " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ r + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" mStartedActivity set"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">hideForNow </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    }<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// Get rid of anything left hanging around.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">cleanUpPendingRemoveWindows</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(r, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">/* force */</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// The window is now visible if it has been added, we are not<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    // simply finishing, and we are not starting another activity.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFinished </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp;&amp; willBeVisible &amp;&amp; r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mDecor </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">!= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp;&amp; !r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">hideForNow</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">localLOGV</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) Slog.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">v</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Resuming " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ r + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" with isForward=" </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ isForward);<br />        ViewRootImpl impl = r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">window</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.getDecorView().getViewRootImpl();<br />        WindowManager.LayoutParams l = impl != </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">                </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">? impl.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mWindowAttributes </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">: r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">window</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.getAttributes();<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">((l.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">softInputMode<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">                </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp; WindowManager.LayoutParams.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">SOFT_INPUT_IS_FORWARD_NAVIGATION</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">)<br />                != forwardBit) {<br />            l.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">softInputMode </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= (l.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">softInputMode<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">                    </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp; (~WindowManager.LayoutParams.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">SOFT_INPUT_IS_FORWARD_NAVIGATION</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">))<br />                    | forwardBit;<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mVisibleFromClient</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                ViewManager wm = a.getWindowManager();<br />                View decor = r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">window</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.getDecorView();<br />                wm.updateViewLayout(decor, l);<br />            }<br />        }<br /><br />        r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mVisibleFromServer </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mNumVisibleActivities</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">++;<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mVisibleFromClient</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.makeVisible();<br />        }<br />    }<br /><br />    r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">nextIdle </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mNewActivities</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mNewActivities </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= r;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">localLOGV</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) Slog.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">v</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Scheduling idle handler for " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ r);<br />    Looper.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">myQueue</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">().addIdleHandler(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Idler());<br />}</span></font></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="15" y="232" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:4857/4910)@Override...</text></switch></g><rect x="720" y="240" width="600" height="820" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 597px; height: 1px; padding-top: 240px; margin-left: 725px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font color="#cccccc" style="background-color: rgb(255, 255, 255);"><font face="Consolas, monospace"><span style="font-size: 8.3pt;">// </span><span style="font-size: 11.0667px;">at android.app.ActivityThread.performResumeActivity(ActivityThread.java:4814)</span><span style="font-size: 8.3pt;"><br /></span></font></font><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">@VisibleForTesting<br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public boolean </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">performResumeActivity(ActivityClientRecord r, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">boolean </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">finalStateRequest,<br />        String reason) {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">localLOGV</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        Slog.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">v</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Performing resume of " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ r + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" finished=" </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFinished</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFinished</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return false</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    }<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(r.getLifecycleState() == </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">ON_RESUME</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!finalStateRequest) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">RuntimeException e = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">IllegalStateException(<br />                    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Trying to resume activity which is already resumed"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            Slog.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">e</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, e.getMessage(), e);<br />            Slog.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">e</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, r.getStateString());<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 115, 191); font-weight: bold; font-style: italic;">TODO(lifecycler): A double resume request is possible when an activity<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 115, 191); font-weight: bold; font-style: italic;">            </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// receives two consequent transactions with relaunch requests and "resumed"<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // final state requests and the second relaunch is omitted. We still try to<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // handle two resume requests for the final state. For cases other than this<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // one, we don't expect it to happen.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">}<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return false</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    }<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(finalStateRequest) {<br />        r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">hideForNow </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mStartedActivity </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    }<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">try </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />        r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.onStateNotSaved();<br />        r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFragments</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.noteStateNotSaved();<br />        checkAndBlockForNetworkAccess();<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">pendingIntents </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">!= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            deliverNewIntents(r, r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">pendingIntents</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">pendingIntents </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        }<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">pendingResults </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">!= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            deliverResults(r, r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">pendingResults</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, reason);<br />            r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">pendingResults </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        }<br />        r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">.</span><span style="background-color: rgb(204, 204, 204);">performResume</span><span style="background-color: rgb(255, 255, 255);">(r.</span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">startsNotResumed</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, reason);<br /><br />        r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">state </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">persistentState </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        r.setState(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">ON_RESUME</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br /><br />        reportTopResumedActivityChanged(r, r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">isTopResumedActivity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"topWhenResuming"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">catch </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Exception e) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mInstrumentation</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.onException(r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">activity</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, e)) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">RuntimeException(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Unable to resume activity "<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                    </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ r.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">intent</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.getComponent().toShortString() + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">": " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ e.toString(), e);<br />        }<br />    }<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />}</span></font></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="725" y="252" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// at android.app.ActivityThread.performResumeActivity(ActivityThread.java:4814)@VisibleForTesting...</text></switch></g><path d="M 210 395 Q 240 395 465 317.5 Q 690 240 713.63 240" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 718.88 240 L 711.88 243.5 L 713.63 240 L 711.88 236.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="205" cy="395" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="1360" y="240" width="640" height="880" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 637px; height: 1px; padding-top: 240px; margin-left: 1365px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\app\Activity.java</span><span style="font-size: 8.3pt;"><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">performResume(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">boolean </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">followedByPause, String reason) {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">isTagEnabled</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_WINDOW_MANAGER</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">)) {<br />        Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">traceBegin</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_WINDOW_MANAGER</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"performResume:"<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mComponent</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.getClassName());<br />    }<br />    dispatchActivityPreResumed();<br />    performRestart(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">/* start */</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, reason);<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFragments</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.execPendingActions();<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLastNonConfigurationInstances </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mAutoFillResetNeeded</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// When Activity is destroyed in paused state, and relaunch activity, there will be<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // extra onResume and onPause event,  ignore the first onResume and onPause.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // see ActivityThread.handleRelaunchActivity()<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mAutoFillIgnoreFirstResumePause </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= followedByPause;<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mAutoFillIgnoreFirstResumePause </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp;&amp; </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_LIFECYCLE</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            Slog.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">v</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"autofill will ignore first pause when relaunching " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">this</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        }<br />    }<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mCalled </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// mResumed is set by the instrumentation<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mInstrumentation</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">.</span><span style="background-color: rgb(204, 204, 204);">callActivityOnResume</span><span style="background-color: rgb(255, 255, 255);">(</span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">this</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    EventLogTags.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">writeWmOnResumeCalled</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mIdent</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, getComponentName().getClassName(), reason);<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mCalled</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">SuperNotCalledException(<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Activity " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mComponent</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.toShortString() +<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" did not call through to super.onResume()"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// invisible activities must be finished before onResume() completes<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mVisibleFromClient </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp;&amp; !</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFinished</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        Log.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">w</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"An activity without a UI must call finish() before onResume() completes"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(getApplicationInfo().</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">targetSdkVersion<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">                </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&gt; android.os.Build.VERSION_CODES.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">LOLLIPOP_MR1</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">IllegalStateException(<br />                    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Activity " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mComponent</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.toShortString() +<br />                    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" did not call finish() prior to onResume() completing"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        }<br />    }<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// Now really resume, and install the current status bar and menu.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mCalled </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFragments</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.dispatchResume();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFragments</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.execPendingActions();<br /><br />    onPostResume();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mCalled</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">SuperNotCalledException(<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Activity " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mComponent</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.toShortString() +<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" did not call through to super.onPostResume()"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br />    dispatchActivityPostResumed();<br />    Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">traceEnd</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_WINDOW_MANAGER</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />}</span></font></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="1365" y="252" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\app\Activity.javafinal void performResume(bool...</text></switch></g><path d="M 930 835 Q 960 835 1145 537.5 Q 1330 240 1353.63 240" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1358.88 240 L 1351.88 243.5 L 1353.63 240 L 1351.88 236.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="925" cy="835" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="2040" y="240" width="580" height="260" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 577px; height: 1px; padding-top: 240px; margin-left: 2045px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style="background-color: rgb(255, 255, 255);"><font color="#cccccc"><font face="Consolas, monospace"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\app\Instrumentation.java</span></font><font face="Consolas, monospace"><span style="font-size: 8.3pt;"><i style=""><br /></i></span></font></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">callActivityOnResume(Activity activity) {<br />    activity.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mResumed </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">= </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><span style="font-size: 8.3pt;"><font face="Consolas, monospace">;<br /></font><font face="consolas" color="#ff0000"><i>    // 调用 Activity.onResume() 生命周期<br /></i></font><font face="Consolas, monospace">    activity.onResume();<br />    <br />    </font></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">(</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mActivityMonitors </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">!= </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">synchronized </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">(</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mSync</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final int </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">N = </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mActivityMonitors</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">.size();<br />            </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">for </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">(</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">int </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">i=</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">; i&lt;N; i++) {<br />                </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">ActivityMonitor am = </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mActivityMonitors</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">.get(i);<br />                am.match(activity, activity, activity.getIntent());<br />            }<br />        }<br />    }<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="2045" y="252" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\app\Instrumentation.javapublic void...</text></switch></g><path d="M 1630 615 Q 1660 615 1835 427.5 Q 2010 240 2033.63 240" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2038.88 240 L 2031.88 243.5 L 2033.63 240 L 2031.88 236.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="1625" cy="615" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="720" y="1160" width="600" height="130" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 597px; height: 1px; padding-top: 1160px; margin-left: 725px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\WindowManagerImpl.java</span><span style="font-size: 8.3pt;"><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">@Override<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">addView(@NonNull View view, @NonNull ViewGroup.LayoutParams params) {<br />    applyTokens(params);<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mGlobal</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">.</span><span style="background-color: rgb(204, 204, 204);">addView</span><span style="background-color: rgb(255, 255, 255);">(view, params, </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mContext</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.getDisplayNoVerify(), </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mParentWindow</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">,<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mContext</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.getUserId());<br />}</span></font></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="725" y="1172" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\WindowManagerImpl.java@Override...</text></switch></g><path d="M 180 1155 Q 210 1155 450 1157.5 Q 690 1160 713.63 1160" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 718.88 1160 L 711.88 1163.5 L 713.63 1160 L 711.88 1156.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="175" cy="1155" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="1360" y="1160" width="610" height="1320" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 607px; height: 1px; padding-top: 1160px; margin-left: 1365px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\WindowManagerGlobal.java</span><span style="font-size: 8.3pt;"><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">addView(View view, ViewGroup.LayoutParams params,<br />        Display display, Window parentWindow, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">int </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">userId) {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(view == </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">IllegalArgumentException(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"view must not be null"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(display == </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">IllegalArgumentException(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"display must not be null"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!(params </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">instanceof </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">WindowManager.LayoutParams)) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">IllegalArgumentException(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Params must be WindowManager.LayoutParams"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">WindowManager.LayoutParams wparams = (WindowManager.LayoutParams) params;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(parentWindow != </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        parentWindow.adjustLayoutParamsForSubWindow(wparams);<br />    } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">else </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// If there's no parent, then hardware acceleration for this view is<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // set from the application's hardware acceleration setting.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Context context = view.getContext();<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(context != </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">                </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp;&amp; (context.getApplicationInfo().</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">flags<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">                        </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp; ApplicationInfo.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">FLAG_HARDWARE_ACCELERATED</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) != </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            wparams.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">flags </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">|= WindowManager.LayoutParams.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">FLAG_HARDWARE_ACCELERATED</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        }<br />    }<br /><br />    ViewRootImpl root;<br />    View panelParentView = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">synchronized </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLock</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// Start watching for system property changes.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mSystemPropertyUpdater </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">== </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mSystemPropertyUpdater </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Runnable() {<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">@Override </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">run() {<br />                    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">synchronized </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLock</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">for </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">int </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">i = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mRoots</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.size() - </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">1</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">; i &gt;= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">; --i) {<br />                            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mRoots</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.get(i).loadSystemProperties();<br />                        }<br />                    }<br />                }<br />            };<br />            SystemProperties.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">addChangeCallback</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mSystemPropertyUpdater</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        }<br /><br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">int </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">index = findViewLocked(view, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(index &gt;= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mDyingViews</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.contains(view)) {<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// Don't wait for MSG_DIE to make it's way through root's queue.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">                </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mRoots</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.get(index).doDie();<br />            } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">else </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">IllegalStateException(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"View " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ view<br />                        + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" has already been added to the window manager."</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            }<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// The previous removeView() had not completed executing. Now it has.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">}<br /><br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// If this is a panel window, then find the window it is being<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // attached to for future reference.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(wparams.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">type </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&gt;= WindowManager.LayoutParams.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">FIRST_SUB_WINDOW </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp;&amp;<br />                wparams.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">type </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&lt;= WindowManager.LayoutParams.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">LAST_SUB_WINDOW</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final int </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">count = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mViews</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.size();<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">for </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">int </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">i = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">; i &lt; count; i++) {<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mRoots</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.get(i).</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mWindow</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.asBinder() == wparams.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">token</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                    panelParentView = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mViews</span><font style="background-color: rgb(255, 255, 255);"><span style="font-family: Consolas, monospace; font-size: 8.3pt;">.get(i);<br />                }<br />            }<br />        }<br /></span><span style="font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>        // 由 handleResumeActivity() 调用过来，在此创建出 ViewRootImpl 对象<br />        // 并将显示目标 display 对象保存到 ViewRootImpl 对象中<br /></i></font></span><span style="font-family: Consolas, monospace; font-size: 8.3pt;">        root = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(204, 204, 204);">ViewRootImpl</span><span style="background-color: rgb(255, 255, 255);">(view.getContext(), display);<br /><br />        view.setLayoutParams(wparams);<br /><br />        </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mViews</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.add(view);<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mRoots</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.add(root);<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mParams</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.add(wparams);<br /><br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// do this last because it fires off messages to start doing things<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">try </span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">{<br />            root.</span><span style="background-color: rgb(204, 204, 204);">setView</span><span style="background-color: rgb(255, 255, 255);">(view, wparams, panelParentView, userId);<br />        } </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">catch </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(RuntimeException e) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// BadTokenException or InvalidDisplayException, clean up.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(index &gt;= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                removeViewLocked(index, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            }<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">e;<br />        }<br />    }<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="1365" y="1172" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\WindowManagerGlobal.javapublic void...</text></switch></g><path d="M 850 1235 Q 880 1235 1105 1197.5 Q 1330 1160 1353.63 1160" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1358.88 1160 L 1351.88 1163.5 L 1353.63 1160 L 1351.88 1156.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="845" cy="1235" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="2040" y="1160" width="640" height="1180" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 637px; height: 1px; padding-top: 1160px; margin-left: 2045px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;"><font color="#cccccc">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\ViewRootImpl.java</font></span><span style="font-size: 8.3pt;"><font color="#cccccc"><br /></font><b style="color: rgb(0, 0, 128);">public </b></span></font><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">ViewRootImpl(Context context, Display display) {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">this</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(context, display, WindowManagerGlobal.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">getWindowSession</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(),<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">/* useSfChoreographer */</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />}<br /><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">ViewRootImpl(@UiContext Context context, Display display, IWindowSession session) {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">this</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(context, display, session, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">/* useSfChoreographer */</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />}<br /><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">ViewRootImpl(@UiContext Context context, Display display, IWindowSession session,<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">boolean </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">useSfChoreographer) {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mContext </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= context;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mWindowSession </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= session;<br />    </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;"><span style="background-color: rgb(255, 255, 0);">mDisplay</span><span style="background-color: rgb(255, 255, 255);"> </span></span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= display;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mBasePackageName </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= context.getBasePackageName();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mThread </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= Thread.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">currentThread</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLocation </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">WindowLeaked(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLocation</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.fillInStackTrace();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mWidth </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= -</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">1</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHeight </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= -</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">1</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mDirty </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Rect();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTempRect </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Rect();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mVisRect </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Rect();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mWinFrame </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Rect();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mWindow </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">W(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">this</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLeashToken </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Binder();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTargetSdkVersion </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= context.getApplicationInfo().</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">targetSdkVersion</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mViewVisibility </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= View.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">GONE</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTransparentRegion </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Region();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mPreviousTransparentRegion </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Region();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFirst </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">; </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// true for the first time the view is added<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mPerformContentCapture </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">; </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// also true for the first time the view is added<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mAdded </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mAttachInfo </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">View.AttachInfo(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mWindowSession</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mWindow</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, display, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">this</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandler</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">this</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">,<br />            context);<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mCompatibleVisibilityInfo </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">SystemUiVisibilityInfo();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mAccessibilityManager </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= AccessibilityManager.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">getInstance</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(context);<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHighContrastTextManager </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">HighContrastTextManager();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mViewConfiguration </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= ViewConfiguration.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">get</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(context);<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mDensity </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= context.getResources().getDisplayMetrics().</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">densityDpi</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mNoncompatDensity </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= context.getResources().getDisplayMetrics().</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">noncompatDensityDpi</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFallbackEventHandler </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">PhoneFallbackEventHandler(context);<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mChoreographer </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= useSfChoreographer<br />            ? Choreographer.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">getSfInstance</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">() : Choreographer.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">getInstance</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mDisplayManager </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= (DisplayManager)context.getSystemService(Context.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DISPLAY_SERVICE</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mInsetsController </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">InsetsController(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">ViewRootInsetsControllerHost(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">this</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">));<br /><br />    String processorOverrideName = context.getResources().getString(<br />                                R.string.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">config_inputEventCompatProcessorOverrideClassName</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(processorOverrideName.isEmpty()) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// No compatibility processor override, using default.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mInputCompatProcessor </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">InputEventCompatProcessor(context);<br />    } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">else </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />        InputEventCompatProcessor compatProcessor = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">try </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Class&lt;? </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">extends </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">InputEventCompatProcessor&gt; klass =<br />                    (Class&lt;? </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">extends </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">InputEventCompatProcessor&gt;) Class.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">forName</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(<br />                            processorOverrideName);<br />            compatProcessor = klass.getConstructor(Context.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">class</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">).newInstance(context);<br />        } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">catch </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Exception e) {<br />            Log.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">e</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Unable to create the InputEventCompatProcessor. "</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, e);<br />        } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">finally </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mInputCompatProcessor </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= compatProcessor;<br />        }<br />    }<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-style: italic;">sCompatibilityDone</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-style: italic;">sAlwaysAssignFocus </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTargetSdkVersion </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&lt; Build.VERSION_CODES.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">P</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br /><br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-style: italic;">sCompatibilityDone </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    }<br /><br />    loadSystemProperties();<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mImeFocusController </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">ImeFocusController(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">this</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    AudioManager audioManager = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mContext</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.getSystemService(AudioManager.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">class</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFastScrollSoundEffectsEnabled </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= audioManager.areNavigationRepeatSoundEffectsEnabled();<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mScrollCaptureRequestTimeout </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">SCROLL_CAPTURE_REQUEST_TIMEOUT_MILLIS</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="2045" y="1172" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\ViewRootImpl.javapublic ViewRootImpl(Cont...</text></switch></g><path d="M 1560 2185 Q 1590 2185 1800 1672.5 Q 2010 1160 2033.63 1160" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2038.88 1160 L 2031.88 1163.5 L 2033.63 1160 L 2031.88 1156.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="1555" cy="2185" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="2720" y="240" width="660" height="2140" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 657px; height: 1px; padding-top: 240px; margin-left: 2725px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><span style="background-color: rgb(255, 255, 255);"><font face="Consolas, monospace" color="#cccccc"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\ViewRootImpl.java</span><span style="font-size: 8.3pt;"><br /></span></font></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">/**<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;"> * We have one child<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;"> */<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">public void </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">setView(View view, WindowManager.LayoutParams attrs, View panelParentView,<br />        </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">int </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">userId) {<br />    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">synchronized </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">this</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) {<br />        </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mView </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">== </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">null</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) {<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mView </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= view;<br /><br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mAttachInfo</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mDisplayState </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mDisplay</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.getState();<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mViewLayoutDirectionInitial </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mView</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.getRawLayoutDirection();<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mFallbackEventHandler</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.setView(view);<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mWindowAttributes</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.copyFrom(attrs);<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mWindowAttributes</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">packageName </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">== </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">null</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) {<br />                </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mWindowAttributes</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">packageName </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mBasePackageName</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />            }<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mWindowAttributes</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">privateFlags </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">|=<br />                    WindowManager.LayoutParams.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">PRIVATE_FLAG_USE_BLAST</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br /><br />            attrs = </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mWindowAttributes</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />            setTag();<br /><br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_KEEP_SCREEN_ON </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">&amp;&amp; (</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mClientWindowLayoutFlags<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">                    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">&amp; WindowManager.LayoutParams.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">FLAG_KEEP_SCREEN_ON</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) != </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255);">0<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255);">                    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">&amp;&amp; (attrs.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">flags</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">&amp;WindowManager.LayoutParams.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">FLAG_KEEP_SCREEN_ON</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) == </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255);">0</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) {<br />                Slog.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); font-style: italic;">d</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mTag</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">, </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 128, 0); font-weight: bold;">"setView: FLAG_KEEP_SCREEN_ON changed from true to false!"</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">);<br />            }<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">// Keep track of the actual window flags supplied by the client.<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mClientWindowLayoutFlags </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= attrs.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">flags</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br /><br />            setAccessibilityFocus(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">null</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">, </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">null</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">);<br /><br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(view </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">instanceof </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">RootViewSurfaceTaker) {<br />                </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mSurfaceHolderCallback </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">=<br />                        ((RootViewSurfaceTaker)view).willYouTakeTheSurface();<br />                </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mSurfaceHolderCallback </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">!= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">null</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) {<br />                    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mSurfaceHolder </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">new </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">TakenSurfaceHolder();<br />                    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mSurfaceHolder</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.setFormat(PixelFormat.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">UNKNOWN</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">);<br />                    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mSurfaceHolder</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.addCallback(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mSurfaceHolderCallback</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">);<br />                }<br />            }<br /><br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">// Compute surface insets required to draw at specified Z value.<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">            // </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 115, 191); font-weight: bold; font-style: italic;">TODO: Use real shadow insets for a constant max Z.<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 115, 191); font-weight: bold; font-style: italic;">            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(!attrs.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">hasManualSurfaceInsets</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) {<br />                attrs.setSurfaceInsets(view, </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">false </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">/*manual*/</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">, </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">true </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">/*preservePrevious*/</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">);<br />            }<br /><br />            CompatibilityInfo compatibilityInfo =<br />                    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mDisplay</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.getDisplayAdjustments().getCompatibilityInfo();<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mTranslator </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= compatibilityInfo.getTranslator();<br /><br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">// If the application owns the surface, don't enable hardware acceleration<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mSurfaceHolder </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">== </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">null</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) {<br />                </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">// While this is supposed to enable only, it can effectively disable<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">                // the acceleration too.<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">                </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">enableHardwareAcceleration(attrs);<br />                </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">final boolean </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">useMTRenderer = </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">MT_RENDERER_AVAILABLE<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">                        </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">&amp;&amp; </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mAttachInfo</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mThreadedRenderer </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">!= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">null</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />                </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mUseMTRenderer </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">!= useMTRenderer) {<br />                    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">// Shouldn't be resizing, as it's done only in window setup,<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">                    // but end just in case.<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">                    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">endDragResizing();<br />                    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mUseMTRenderer </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= useMTRenderer;<br />                }<br />            }<br /><br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">boolean </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">restore = </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">false</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mTranslator </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">!= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">null</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) {<br />                </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mSurface</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.setCompatibilityTranslator(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mTranslator</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">);<br />                restore = </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">true</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />                attrs.backup();<br />                </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mTranslator</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.translateWindowLayout(attrs);<br />            }<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_LAYOUT</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) Log.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); font-style: italic;">d</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mTag</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">, </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 128, 0); font-weight: bold;">"WindowLayout in setView:" </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">+ attrs);<br /><br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(!compatibilityInfo.supportsScreen()) {<br />                attrs.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">privateFlags </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">|= WindowManager.LayoutParams.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">PRIVATE_FLAG_COMPATIBLE_WINDOW</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />                </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mLastInCompatMode </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">true</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />            }<br /><br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mSoftInputMode </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= attrs.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">softInputMode</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mWindowAttributesChanged </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">true</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mAttachInfo</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mRootView </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= view;<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mAttachInfo</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mScalingRequired </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mTranslator </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">!= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">null</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mAttachInfo</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mApplicationScale </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">=<br />                    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mTranslator </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">== </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">null </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">? </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255);">1.0f </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">: </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mTranslator</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">applicationScale</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">if </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">(panelParentView != </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">null</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">) {<br />                </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mAttachInfo</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mPanelParentWindowToken<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">                        </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= panelParentView.getApplicationWindowToken();<br />            }<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(102, 14, 122); font-weight: bold;">mAdded </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">= </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">true</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">;<br />            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">int </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">res; </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">/* = WindowManagerImpl.ADD_OKAY; */<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;"><br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">            // Schedule the first layout -before- adding to the window<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">            // manager, to make sure we do the relayout before receiving<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">            // any other events from the system.<br /></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255); color: rgb(128, 128, 128); font-style: italic;">            </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(204, 204, 204);">requestLayout</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; background-color: rgb(255, 255, 255);">();<br />            InputChannel inputChannel = <span style="color:#000080;font-weight:bold;">null</span>;<br />            <span style="color:#000080;font-weight:bold;">if </span>((<span style="color:#660e7a;font-weight:bold;">mWindowAttributes</span>.<span style="color:#660e7a;font-weight:bold;">inputFeatures<br /></span><span style="color:#660e7a;font-weight:bold;">                    </span>&amp; WindowManager.LayoutParams.<span style="color:#660e7a;font-weight:bold;font-style:italic;">INPUT_FEATURE_NO_INPUT_CHANNEL</span>) == <span style="color:#0000ff;">0</span>) {<br />                inputChannel = <span style="color:#000080;font-weight:bold;">new </span>InputChannel();<br />            }<br />            <span style="color:#660e7a;font-weight:bold;">mForceDecorViewVisibility </span>= (<span style="color:#660e7a;font-weight:bold;">mWindowAttributes</span>.<span style="color:#660e7a;font-weight:bold;">privateFlags<br /></span><span style="color:#660e7a;font-weight:bold;">                    </span>&amp; <span style="color:#660e7a;font-weight:bold;font-style:italic;">PRIVATE_FLAG_FORCE_DECOR_VIEW_VISIBILITY</span>) != <span style="color:#0000ff;">0</span>;<br /><br />            <span style="color:#000080;font-weight:bold;">if </span>(<span style="color:#660e7a;font-weight:bold;">mView </span><span style="color:#000080;font-weight:bold;">instanceof </span>RootViewSurfaceTaker) {<br />                PendingInsetsController pendingInsetsController =<br />                        ((RootViewSurfaceTaker) <span style="color:#660e7a;font-weight:bold;">mView</span>).providePendingInsetsController();<br />                <span style="color:#000080;font-weight:bold;">if </span>(pendingInsetsController != <span style="color:#000080;font-weight:bold;">null</span>) {<br />                    pendingInsetsController.replayAndAttach(<span style="color:#660e7a;font-weight:bold;">mInsetsController</span>);<br />                }<br />            }<br /><br />            <span style="color:#000080;font-weight:bold;">try </span>{<br />                <span style="color:#660e7a;font-weight:bold;">mOrigWindowType </span>= <span style="color:#660e7a;font-weight:bold;">mWindowAttributes</span>.<span style="color:#660e7a;font-weight:bold;">type</span>;<br />                <span style="color:#660e7a;font-weight:bold;">mAttachInfo</span>.<span style="color:#660e7a;font-weight:bold;">mRecomputeGlobalAttributes </span>= <span style="color:#000080;font-weight:bold;">true</span>;<br />                collectViewAttributes();<br />                <span style="font-style:italic;">adjustLayoutParamsForCompatibility</span>(<span style="color:#660e7a;font-weight:bold;">mWindowAttributes</span>);<br />                controlInsetsForCompatibility(<span style="color:#660e7a;font-weight:bold;">mWindowAttributes</span>);<br />                res = <span style="color:#660e7a;font-weight:bold;">mWindowSession</span>.addToDisplayAsUser(<span style="color:#660e7a;font-weight:bold;">mWindow</span>, <span style="color:#660e7a;font-weight:bold;">mWindowAttributes</span>,<br />                        getHostVisibility(), <span style="color:#660e7a;font-weight:bold;">mDisplay</span>.getDisplayId(), userId,<br />                        <span style="color:#660e7a;font-weight:bold;">mInsetsController</span>.getRequestedVisibilities(), inputChannel, <span style="color:#660e7a;font-weight:bold;">mTempInsets</span>,<br />                        <span style="color:#660e7a;font-weight:bold;">mTempControls</span>);<br />                <span style="color:#000080;font-weight:bold;">if </span>(<span style="color:#660e7a;font-weight:bold;">mTranslator </span>!= <span style="color:#000080;font-weight:bold;">null</span>) {<br />                    <span style="color:#660e7a;font-weight:bold;">mTranslator</span>.translateInsetsStateInScreenToAppWindow(<span style="color:#660e7a;font-weight:bold;">mTempInsets</span>);<br />                    <span style="color:#660e7a;font-weight:bold;">mTranslator</span>.translateSourceControlsInScreenToAppWindow(<span style="color:#660e7a;font-weight:bold;">mTempControls</span>);<br />                }<br />            } <span style="color:#000080;font-weight:bold;">catch </span>(RemoteException e) {<br />                <span style="color:#660e7a;font-weight:bold;">mAdded </span>= <span style="color:#000080;font-weight:bold;">false</span>;<br />                <span style="color:#660e7a;font-weight:bold;">mView </span>= <span style="color:#000080;font-weight:bold;">null</span>;<br />                <span style="color:#660e7a;font-weight:bold;">mAttachInfo</span>.<span style="color:#660e7a;font-weight:bold;">mRootView </span>= <span style="color:#000080;font-weight:bold;">null</span>;<br />                <span style="color:#660e7a;font-weight:bold;">mFallbackEventHandler</span>.setView(<span style="color:#000080;font-weight:bold;">null</span>);<br />                unscheduleTraversals();<br />                setAccessibilityFocus(<span style="color:#000080;font-weight:bold;">null</span>, <span style="color:#000080;font-weight:bold;">null</span>);<br />                <span style="color:#000080;font-weight:bold;">throw new </span>RuntimeException(<span style="color:#008000;font-weight:bold;">"Adding window failed"</span>, e);<br />            } <span style="color:#000080;font-weight:bold;">finally </span>{<br />                <span style="color:#000080;font-weight:bold;">if </span>(restore) {<br />                    attrs.restore();<br />                }<br />            }<br /><br />            <font color="#660e7a"><b>...</b></font><br />        }<br />    }<br />}</span></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="2725" y="252" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\ViewRootImpl.java/**...</text></switch></g><path d="M 1520 2325 Q 1550 2325 2120 1282.5 Q 2690 240 2713.63 240" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2718.88 240 L 2711.88 243.5 L 2713.63 240 L 2711.88 236.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="1515" cy="2325" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="3440" y="1160" width="560" height="160" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 557px; height: 1px; padding-top: 1160px; margin-left: 3445px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\ViewRootImpl.java</span><span style="font-size: 8.3pt;"><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">@Override<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">requestLayout() {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandlingLayoutInLayoutRequest</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">) {<br />        </span><span style="background-color: rgb(204, 204, 204);">checkThread</span><span style="background-color: rgb(255, 255, 255);">();<br />        </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLayoutRequested </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">;<br />        </span><span style="background-color: rgb(204, 204, 204);">scheduleTraversals</span><span style="background-color: rgb(255, 255, 255);">();<br />    }<br />}</span></span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="3445" y="1172" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\ViewRootImpl.java@Override...</text></switch></g><path d="M 2880 1665 Q 2910 1665 3160 1412.5 Q 3410 1160 3433.63 1160" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3438.88 1160 L 3431.88 1163.5 L 3433.63 1160 L 3431.88 1156.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="2875" cy="1665" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="4040" y="960" width="650" height="160" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 647px; height: 1px; padding-top: 960px; margin-left: 4045px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style="background-color: rgb(255, 255, 255);"><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace"><font color="#999999"><span style="font-size: 8.3pt;">// </span><span style="font-size: 11.0667px;">android-12.1.0_r2\frameworks\base\core\java\android\view\ViewRootImpl.java</span></font><span style="font-size: 8.3pt;"><font color="#999999"><br /></font><b style="color: rgb(0, 0, 128);">void </b></span></font><span style="font-size: 8.3pt;"><font face="Consolas, monospace">checkThread() {<br /></font><font style="" face="consolas" color="#ff0000"><i>    // </i></font></span><font face="consolas" color="#ff0000"><i><span style="font-size: 11.0667px;">requestLayout 方法必须在主线程中调用</span><span style="font-size: 8.3pt;"><br />    </span><span style="font-size: 8.3pt;">// mThread = "Thread[main,5,main]"<br /></span></i></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">(</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mThread </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">!= Thread.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">currentThread</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">()) {<br />        </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw new </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">CalledFromWrongThreadException(<br />                </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Only the original thread that created a view hierarchy can touch its views."</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">);<br />    }<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="4045" y="972" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// android-12.1.0_r2\frameworks\base\core\java\android\view\ViewRootImpl.javavoid checkThread() {...</text></switch></g><path d="M 3560 1240 Q 3590 1240 3800 1100 Q 4010 960 4033.63 960" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4038.88 960 L 4031.88 963.5 L 4033.63 960 L 4031.88 956.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="3555" cy="1240" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="4040" y="1160" width="570" height="230" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 567px; height: 1px; padding-top: 1160px; margin-left: 4045px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\ViewRootImpl.java</span><span style="font-size: 8.3pt;"><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">@UnsupportedAppUsage</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(maxTargetSdk = Build.VERSION_CODES.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">R</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, trackingBug = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">170729553</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">)<br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">scheduleTraversals() {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTraversalScheduled</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTraversalScheduled </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">;<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>        // 设置同步屏障，同步屏障其实就是向 MessageQueue 添加一个不带 target 的消息，<br />        // 作用是屏蔽 handler 的同步消息，只处理异步消息<br /></i></font></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTraversalBarrier </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandler</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">.getLooper().getQueue().</span><span style="background-color: rgb(255, 255, 0);">postSyncBarrier</span><span style="background-color: rgb(255, 255, 255);">();<br />        </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mChoreographer</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">.</span><span style="background-color: rgb(204, 204, 204);">postCallback</span><span style="background-color: rgb(255, 255, 255);">(<br />                Choreographer.</span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">CALLBACK_TRAVERSAL</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTraversalRunnable</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        notifyRendererOfFramePending();<br />        pokeDrawLockIfNeeded();<br />    }<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="4045" y="1172" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\ViewRootImpl.java@UnsupportedA...</text></switch></g><path d="M 3610 1265 Q 3640 1265 3825 1212.5 Q 4010 1160 4033.63 1160" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4038.88 1160 L 4031.88 1163.5 L 4033.63 1160 L 4031.88 1156.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="3605" cy="1265" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="4680" y="1160" width="570" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 567px; height: 1px; padding-top: 1160px; margin-left: 4685px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style="font-family: Consolas, monospace; font-size: 8.3pt;"><font color="#cccccc" style="background-color: rgb(255, 255, 255);">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java<br /></font><span style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">public void </span><span style="background-color: rgb(255, 255, 255);">postCallback(</span><span style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 128); font-weight: bold;">int </span><span style="background-color: rgb(255, 255, 255);">callbackType, Runnable action, Object token) {<br />    </span><span style="background-color: rgb(204, 204, 204);">postCallbackDelayed</span><span style="background-color: rgb(255, 255, 255);">(callbackType, action, token, </span><span style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 255);">0</span><span style="background-color: rgb(255, 255, 255);">);<br />}</span></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="4685" y="1172" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java...</text></switch></g><path d="M 4270 1295 Q 4300 1295 4475 1227.5 Q 4650 1160 4673.63 1160" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4678.88 1160 L 4671.88 1163.5 L 4673.63 1160 L 4671.88 1156.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="4265" cy="1295" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="4690" y="1240" width="570" height="200" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 567px; height: 1px; padding-top: 1240px; margin-left: 4695px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java<br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">postCallbackDelayed(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">int </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">callbackType,<br />        Runnable action, Object token, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">delayMillis) {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(action == </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">IllegalArgumentException(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"action must not be null"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(callbackType &lt; </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0 </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">|| callbackType &gt; </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">CALLBACK_LAST</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">throw new </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">IllegalArgumentException(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"callbackType is invalid"</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">);<br />    }<br /><br />    </span><span style="background-color: rgb(204, 204, 204);">postCallbackDelayedInternal</span><span style="background-color: rgb(255, 255, 255);">(callbackType, action, token, delayMillis);<br />}</span></span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="4695" y="1252" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java...</text></switch></g><rect x="5320" y="1160" width="570" height="400" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 567px; height: 1px; padding-top: 1160px; margin-left: 5325px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java<br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">private void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">postCallbackDelayedInternal(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">int </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">callbackType,<br />        Object action, Object token, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">delayMillis) {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_FRAMES</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        Log.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">d</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"PostCallback: type=" </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ callbackType<br />                + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">", action=" </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ action + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">", token=" </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ token<br />                + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">", delayMillis=" </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ delayMillis);<br />    }<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">synchronized </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLock</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">now = SystemClock.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">uptimeMillis</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">();<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">dueTime = now + delayMillis;<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>        // 将 mTraversalRunnable 保存到 callback 链表中<br />        // callbackType = Choreographer.CALLBACK_TRAVERSAL<br /></i></font></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mCallbackQueues</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">[callbackType].</span><span style="background-color: rgb(204, 204, 204);">addCallbackLocked</span><span style="background-color: rgb(255, 255, 255);">(dueTime, action, token);<br /><br />        </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">(dueTime &lt;= now) {<br />            </span><span style="background-color: rgb(204, 204, 204);">scheduleFrameLocked</span><span style="background-color: rgb(255, 255, 255);">(now);<br />        } </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">else </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />            Message msg = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandler</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.obtainMessage(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">MSG_DO_SCHEDULE_CALLBACK</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, action);<br />            msg.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">arg1 </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= callbackType;<br />            msg.setAsynchronous(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandler</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.sendMessageAtTime(msg, dueTime);<br />        }<br />    }<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="5325" y="1172" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java...</text></switch></g><path d="M 4900 1405 Q 4930 1405 5110 1282.5 Q 5290 1160 5313.63 1160" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 5318.88 1160 L 5311.88 1163.5 L 5313.63 1160 L 5311.88 1156.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="4895" cy="1405" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="5920" y="1160" width="570" height="370" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 567px; height: 1px; padding-top: 1160px; margin-left: 5925px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace"><span style="font-size: 11.0667px;"><font color="#cccccc">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java</font></span><span style="font-size: 8.3pt;"><font color="#cccccc"><br /></font><font color="#808000">@UnsupportedAppUsage<br /></font></span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">addCallbackLocked(</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">dueTime, Object action, Object token) {<br />    CallbackRecord callback = obtainCallbackLocked(dueTime, action, token);<br />    CallbackRecord entry = </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHead</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">(entry == </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHead </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">= callback;<br />        </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">;<br />    }<br />    </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">(dueTime &lt; entry.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">dueTime</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">) {<br />        callback.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">= entry;<br />        </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHead </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">= callback;<br />        </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return</span><span style="font-family: Consolas, monospace; font-size: 8.3pt;">;<br />    }<br /></span><span style="font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>    // 将 callback 添加到链表中<br /></i></font></span><span style="font-family: Consolas, monospace; font-size: 8.3pt;">    </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">while </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">(entry.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">!= </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">(dueTime &lt; entry.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">dueTime</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">) {<br />            callback.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">= entry.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">;<br />            </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">break</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">;<br />        }<br />        entry = entry.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">;<br />    }<br />    entry.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">= callback;<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="5925" y="1172" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java@Unsupported...</text></switch></g><path d="M 5690 1385 Q 5720 1385 5805 1272.5 Q 5890 1160 5913.63 1160" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 5918.88 1160 L 5911.88 1163.5 L 5913.63 1160 L 5911.88 1156.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="5685" cy="1385" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="5920" y="1560" width="610" height="470" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 607px; height: 1px; padding-top: 1560px; margin-left: 5925px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java</span><span style="font-size: 8.3pt;"><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">private void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">scheduleFrameLocked(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">now) {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFrameScheduled</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFrameScheduled </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">USE_VSYNC</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_FRAMES</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                Log.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">d</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Scheduling next frame on vsync."</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            }<br /><br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// If running on the Looper thread, then schedule the vsync immediately,<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // otherwise post a message to schedule the vsync from the UI thread<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            // as soon as possible.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">(isRunningOnLooperThreadLocked()) {<br />                </span><span style="background-color: rgb(204, 204, 204);">scheduleVsyncLocked</span><span style="background-color: rgb(255, 255, 255);">();<br />            } </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">else </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />                Message msg = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandler</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.obtainMessage(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">MSG_DO_SCHEDULE_VSYNC</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />                msg.setAsynchronous(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandler</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.sendMessageAtFrontOfQueue(msg);<br />            }<br />        } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">else </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">nextFrameTime = Math.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">max</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(<br />                    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLastFrameTimeNanos </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">/ TimeUtils.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">NANOS_PER_MS </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-style: italic;">sFrameDelay</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, now);<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_FRAMES</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                Log.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">d</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Scheduling next frame in " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ (nextFrameTime - now) + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" ms."</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            }<br />            Message msg = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandler</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.obtainMessage(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">MSG_DO_FRAME</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            msg.setAsynchronous(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandler</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.sendMessageAtTime(msg, nextFrameTime);<br />        }<br />    }<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="5925" y="1572" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.javaprivate void sched...</text></switch></g><path d="M 5530 1425 Q 5560 1425 5725 1492.5 Q 5890 1560 5913.63 1560" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 5918.88 1560 L 5911.88 1563.5 L 5913.63 1560 L 5911.88 1556.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="5525" cy="1425" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="6560" y="1560" width="650" height="200" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 647px; height: 1px; padding-top: 1560px; margin-left: 6565px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java</span><span style="font-size: 8.3pt;"><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">@UnsupportedAppUsage</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(maxTargetSdk = Build.VERSION_CODES.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">R</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, trackingBug = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">170729553</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">)<br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">private void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">scheduleVsyncLocked() {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">try </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />        Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">traceBegin</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_VIEW</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Choreographer#scheduleVsyncLocked"</span><font style="background-color: rgb(255, 255, 255);"><span style="font-family: Consolas, monospace; font-size: 8.3pt;">);<br /></span><span style="font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>        // mDisplayEventReceiver 类型为 FrameDisplayEventReceiver，它是上层用来接收 Vsync 信号的，<br />        // 调用它的 scheduleVsync 方法请求 Vsync，Vsync 请求一次回调一次<br /></i></font></span><span style="font-family: Consolas, monospace; font-size: 8.3pt;">        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mDisplayEventReceiver</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">.</span><span style="background-color: rgb(204, 204, 204);">scheduleVsync</span><span style="background-color: rgb(255, 255, 255);">();<br />    } </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">finally </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />        Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">traceEnd</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_VIEW</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="6565" y="1572" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\Choreographer.java@UnsupportedAppUsage(maxT...</text></switch></g><path d="M 6150 1765 Q 6180 1765 6355 1662.5 Q 6530 1560 6553.63 1560" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 6558.88 1560 L 6551.88 1563.5 L 6553.63 1560 L 6551.88 1556.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="6145" cy="1765" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="7240" y="1560" width="630" height="270" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 627px; height: 1px; padding-top: 1560px; margin-left: 7245px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\DisplayEventReceiver.java</span><span style="font-size: 8.3pt;"><br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">/**<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;"> * Schedules a single vertical sync pulse to be delivered when the next<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;"> * display frame begins.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;"> */<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">@UnsupportedAppUsage<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">scheduleVsync() {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mReceiverPtr </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">== </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        Log.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">w</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Attempted to schedule a vertical sync pulse but the display event "<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"receiver has already been disposed."</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">else </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">{<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>        // 向 SF 请求 VSync，<br />        // 最终会调用 /frameworks/native/services/surfaceflinger/Scheduler/EventThread.cpp<br />        // 的 EventThread::requestNextVsync(const sp&lt;EventThreadConnection&gt;&amp; connection) 方法<br /></i></font></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">        </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic; background-color: rgb(204, 204, 204);">nativeScheduleVsync</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mReceiverPtr</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="7245" y="1572" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// aosp_android-12.1.0_r2\frameworks\base\core\java\android\view\DisplayEventReceiver.java/**...</text></switch></g><path d="M 6850 1685 Q 6880 1685 7045 1622.5 Q 7210 1560 7233.63 1560" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 7238.88 1560 L 7231.88 1563.5 L 7233.63 1560 L 7231.88 1556.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="6845" cy="1685" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="0" y="2340" width="580" height="20" fill="#ffff00" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 582px; height: 1px; padding-top: 2350px; margin-left: 0px;"><div data-drawio-colors="color: #FF0080; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 0, 128); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">【进程信息】com.blackshark.mola@main：收到 VSync 消息后，接收 VSync 的进程</div></div></div></foreignObject><text x="0" y="2354" fill="#FF0080" font-family="Helvetica" font-size="12px">【进程信息】com.blackshark.mola@main：收到 VSync 消息后，接收 VSync 的进程</text></switch></g><rect x="0" y="2360" width="580" height="160" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 577px; height: 1px; padding-top: 2360px; margin-left: 5px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style="background-color: rgb(255, 255, 255);"><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace"><span style="font-size: 11.0667px;">at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)<br />at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)<br />at java.lang.reflect.Method.invoke(Method.java:-1)<br />at android.app.ActivityThread.main(ActivityThread.java:7870)<br />at android.os.Looper.loop(Looper.java:288)<br />at android.os.Looper.loopOnce(Looper.java:161)<br />at android.os.MessageQueue.next(MessageQueue.java:335)<br />at android.os.MessageQueue.nativePollOnce(MessageQueue.java:-1)<br />at android.view.DisplayEventReceiver.dispatchVsync(DisplayEventReceiver.java:260)</span></font><font face="Consolas, monospace"><span style="font-size: 8.3pt;"><br /></span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="5" y="2372" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)...</text></switch></g><rect x="720" y="2520" width="510" height="170" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 507px; height: 1px; padding-top: 2520px; margin-left: 725px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// run():1022, Choreographer$FrameDisplayEventReceiver<br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">private final class </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">FrameDisplayEventReceiver </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">extends </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">DisplayEventReceiver<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">implements </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Runnable {<br />    <font color="#000080"><b>...</b></font></span></font><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;"><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">@Override<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">run() {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHavePendingVsync </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">;<br />        </span><span style="background-color: rgb(204, 204, 204);">doFrame</span><span style="background-color: rgb(255, 255, 255);">(</span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTimestampNanos</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFrame</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLastVsyncEventData</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="725" y="2532" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// run():1022, Choreographer$FrameDisplayEventReceiver...</text></switch></g><path d="M 260 3155 Q 290 3155 490 2837.5 Q 690 2520 713.63 2520" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 718.88 2520 L 711.88 2523.5 L 713.63 2520 L 711.88 2516.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="255" cy="3155" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="1280" y="2520" width="660" height="1490" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 657px; height: 1px; padding-top: 2520px; margin-left: 1285px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="consolas"><font color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// doFrame(long, int, DisplayEventReceiver$VsyncEventData):780, Choreographer<br /></span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">void </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">doFrame(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">frameTimeNanos, </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">int </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">frame,<br />        DisplayEventReceiver.VsyncEventData vsyncEventData) {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">startNanos;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">frameIntervalNanos = vsyncEventData.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">frameInterval</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">try </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">isTagEnabled</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_VIEW</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">)) {<br />            Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">traceBegin</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_VIEW</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">,<br />                    </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Choreographer#doFrame " </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ vsyncEventData.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">id</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        }<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">synchronized </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLock</span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt;">) {<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 11.0667px;"><font color="#ff0000"><i>            // 避免重复向 SF 请求 VSync<br /></i></font></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt;">            </span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(!</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFrameScheduled</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                traceMessage(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Frame not scheduled"</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">; </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// no work to do<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">            </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">}<br /><br />            </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_JANK </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&amp;&amp; </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mDebugPrintNextFrameTimeDelta</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mDebugPrintNextFrameTimeDelta </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />                Log.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">d</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Frame time delta: "<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                        </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ ((frameTimeNanos - </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLastFrameTimeNanos</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) * </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 255);">0.000001f</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) + </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" ms"</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />            }<br /><br />            </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">intendedFrameTimeNanos = frameTimeNanos;<br />            startNanos = System.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">nanoTime</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">();<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">jitterNanos = startNanos - frameTimeNanos;<br /><font color="#ff0000"><i>            // </i></font></span><span style="font-size: 11.0667px;"><font color="#ff0000"><i>检查是否掉帧，skippedFrames 为计算出来的掉帧数，每大于16ms，就多掉一帧</i></font></span><span style="font-size: 8.3pt;"><font color="#ff0000"><i><br /></i></font>            </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(jitterNanos &gt;= frameIntervalNanos) {<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">skippedFrames = jitterNanos / frameIntervalNanos;<br /><i><font color="#ff0000">                // 掉帧超过 30 帧就打印掉帧提醒 log，</font></i></span><i><font color="#ff0000"><span style="font-size: 11.0667px;">SKIPPED_FRAME_WARNING_LIMIT 的值取自系统属性<br /></span><span style="font-size: 8.3pt;">                // </span><span style="font-size: 11.0667px;">debug.choreographer.skipwarning，默认值为 30</span></font></i><span style="font-size: 8.3pt;"><i><font color="#ff0000"><br /></font></i>                </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(skippedFrames &gt;= </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">SKIPPED_FRAME_WARNING_LIMIT</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                    Log.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">i</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Skipped " </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ skippedFrames + </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" frames!  "<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                            </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"The application may be doing too much work on its main thread."</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />                }<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">lastFrameOffset = jitterNanos % frameIntervalNanos;<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_JANK</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                    Log.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">d</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Missed vsync by " </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ (jitterNanos * </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 255);">0.000001f</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) + </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" ms "<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                            </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"which is more than the frame interval of "<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                            </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ (frameIntervalNanos * </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 255);">0.000001f</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) + </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" ms!  "<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                            </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Skipping " </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ skippedFrames + </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" frames and setting frame "<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                            </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"time to " </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ (lastFrameOffset * </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 255);">0.000001f</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) + </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" ms in the past."</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />                }<br />                frameTimeNanos = startNanos - lastFrameOffset;<br />            }<br /><br />            </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(frameTimeNanos &lt; </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLastFrameTimeNanos</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_JANK</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                    Log.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">d</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Frame time appears to be going backwards.  May be due to a "<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                            </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"previously skipped frame.  Waiting for next vsync."</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />                }<br />                traceMessage(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Frame time goes backward"</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />                scheduleVsyncLocked();<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />            }<br /><br />            </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFPSDivisor </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">&gt; </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 255);">1</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">timeSinceVsync = frameTimeNanos - </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLastFrameTimeNanos</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(timeSinceVsync &lt; (frameIntervalNanos * </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFPSDivisor</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) &amp;&amp; timeSinceVsync &gt; </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 255);">0</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                    traceMessage(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Frame skipped due to FPSDivisor"</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />                    scheduleVsyncLocked();<br />                    </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />                }<br />            }<br /><i><font color="#ff0000">            // </font></i></span><span style="font-size: 11.0667px;"><i><font color="#ff0000">intendedFrameTimeNanos 是本来要绘制的时间戳，frameTimeNanos 是真正绘制的时间戳，<br />            // 可以在渲染工具中标识延迟 VSYNC 多少</font></i></span><span style="font-size: 8.3pt;"><i><font color="#ff0000"><br /></font></i>            </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFrameInfo</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.setVsync(intendedFrameTimeNanos, frameTimeNanos, vsyncEventData.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">id</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">,<br />                    vsyncEventData.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">frameDeadline</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, startNanos, vsyncEventData.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">frameInterval</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br /><i><font color="#ff0000">            // </font></i></span><span style="font-size: 11.0667px;"><i><font color="#ff0000">移除mFrameScheduled判断，可以继续向 SF 请求 VSync 了</font></i></span><span style="font-size: 8.3pt;"><i><font color="#ff0000"><br /></font></i>            </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFrameScheduled </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLastFrameTimeNanos </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= frameTimeNanos;<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLastFrameIntervalNanos </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= frameIntervalNanos;<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLastVsyncEventData </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= vsyncEventData;<br />        }<br /><br />        AnimationUtils.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">lockAnimationClock</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(frameTimeNanos / TimeUtils.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">NANOS_PER_MS</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br /><br />        </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFrameInfo</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.markInputHandlingStart();<br />        doCallbacks(Choreographer.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">CALLBACK_INPUT</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, frameTimeNanos, frameIntervalNanos);<br /><br />        </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFrameInfo</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">.markAnimationsStart();<br />        doCallbacks(Choreographer.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">CALLBACK_ANIMATION</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, frameTimeNanos, frameIntervalNanos);<br />        doCallbacks(Choreographer.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">CALLBACK_INSETS_ANIMATION</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, frameTimeNanos,<br />                frameIntervalNanos);<br /><br />        </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mFrameInfo</span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt;">.markPerformTraversalsStart();<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 11.0667px;"><font color="#ff0000"><i>        // 本流程中，只关注 Choreographer.CALLBACK_TRAVERSAL 类型的回调处理<br /></i></font></span><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">        </span><span style="background-color: rgb(204, 204, 204);">doCallbacks</span><span style="background-color: rgb(255, 255, 255);">(Choreographer.</span></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">CALLBACK_TRAVERSAL</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, frameTimeNanos, frameIntervalNanos);<br /><br />        doCallbacks(Choreographer.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">CALLBACK_COMMIT</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, frameTimeNanos, frameIntervalNanos);<br />    } </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">finally </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />        AnimationUtils.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">unlockAnimationClock</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">();<br />        Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">traceEnd</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_VIEW</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_FRAMES</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">endNanos = System.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">nanoTime</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">();<br />        Log.</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; font-style: italic;">d</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Frame " </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ frame + </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">": Finished, took "<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ (endNanos - startNanos) * </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 255);">0.000001f </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" ms, latency "<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ (startNanos - frameTimeNanos) * </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 0, 255);">0.000001f </span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" ms."</span><font style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br />}</span></font></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="1285" y="2532" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// doFrame(long, int, DisplayEventReceiver$VsyncEventData):780, Choreographer...</text></switch></g><path d="M 820 2635 Q 850 2635 1050 2577.5 Q 1250 2520 1273.63 2520" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1278.88 2520 L 1271.88 2523.5 L 1273.63 2520 L 1271.88 2516.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="815" cy="2635" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="2040" y="2520" width="620" height="980" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 617px; height: 1px; padding-top: 2520px; margin-left: 2045px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// doCallbacks(int, long, long):803, Choreographer<br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">doCallbacks(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">int </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">callbackType, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">frameTimeNanos, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">frameIntervalNanos) {<br />    CallbackRecord callbacks;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">synchronized </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLock</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// We use "now" to determine when callbacks become due because it's possible<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // for earlier processing phases in a frame to post callbacks that should run<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // in a following phase, such as an input event that causes an animation to start.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">now = System.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">nanoTime</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">();<br />        callbacks = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mCallbackQueues</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">[callbackType].</span><span style="background-color: rgb(204, 204, 204);">extractDueCallbacksLocked</span><span style="background-color: rgb(255, 255, 255);">(<br />                now / TimeUtils.</span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">NANOS_PER_MS</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(callbacks == </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        }<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mCallbacksRunning </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br /><br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// Update the frame time if necessary when committing the frame.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // We only update the frame time if we are more than 2 frames late reaching<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // the commit phase.  This ensures that the frame time which is observed by the<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // callbacks will always increase from one frame to the next and never repeat.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // We never want the next frame's starting frame time to end up being less than<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // or equal to the previous frame's commit frame time.  Keep in mind that the<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // next frame has most likely already been scheduled by now so we play it<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        // safe by ensuring the commit time is always at least one frame behind.<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(callbackType == Choreographer.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">CALLBACK_COMMIT</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">jitterNanos = now - frameTimeNanos;<br />            Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">traceCounter</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_VIEW</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"jitterNanos"</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, (</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">int</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) jitterNanos);<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(jitterNanos &gt;= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">2 </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">* frameIntervalNanos) {<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">lastFrameOffset = jitterNanos % frameIntervalNanos<br />                        + frameIntervalNanos;<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_JANK</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                    Log.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">d</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Commit callback delayed by " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ (jitterNanos * </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0.000001f</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">)<br />                            + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" ms which is more than twice the frame interval of "<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                            </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ (frameIntervalNanos * </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0.000001f</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" ms!  "<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">                            </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"Setting frame time to " </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ (lastFrameOffset * </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">0.000001f</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">)<br />                            + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">" ms in the past."</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />                    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mDebugPrintNextFrameTimeDelta </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">true</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />                }<br />                frameTimeNanos = now - lastFrameOffset;<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLastFrameTimeNanos </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= frameTimeNanos;<br />            }<br />        }<br />    }<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">try </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />        Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">traceBegin</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_VIEW</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">CALLBACK_TRACE_TITLES</span><font style="background-color: rgb(255, 255, 255);"><span style="font-family: Consolas, monospace; font-size: 8.3pt;">[callbackType]);<br /></span><span style="font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>        // 遍历 extractDueCallbacksLocked() 得到的链表集合，依次调用其 run() 方法<br /><br /></i></font></span><span style="font-family: Consolas, monospace; font-size: 8.3pt;">        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">for </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(CallbackRecord c = callbacks; c != </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">; c = c.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">DEBUG_FRAMES</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />                Log.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">d</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TAG</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"RunCallback: type=" </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ callbackType<br />                        + </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">", action=" </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ c.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">action </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">", token=" </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ c.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">token<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">                        </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">", latencyMillis=" </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">+ (SystemClock.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">uptimeMillis</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">() - c.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">dueTime</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">));<br />            }<br />            c.</span><span style="background-color: rgb(204, 204, 204);">run</span><span style="background-color: rgb(255, 255, 255);">(frameTimeNanos);<br />        }<br />    } </span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">finally </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">synchronized </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mLock</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mCallbacksRunning </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">do </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />                </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">CallbackRecord next = callbacks.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />                recycleCallbackLocked(callbacks);<br />                callbacks = next;<br />            } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">while </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(callbacks != </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />        }<br />        Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">traceEnd</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(Trace.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">TRACE_TAG_VIEW</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br />    }<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="2045" y="2532" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// doCallbacks(int, long, long):803, Choreographer...</text></switch></g><path d="M 1410 3785 Q 1440 3785 1725 3152.5 Q 2010 2520 2033.63 2520" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2038.88 2520 L 2031.88 2523.5 L 2033.63 2520 L 2031.88 2516.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="1405" cy="3785" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="2720" y="2520" width="490" height="420" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 487px; height: 1px; padding-top: 2520px; margin-left: 2725px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;"><font face="Consolas, monospace" style="color: rgb(204, 204, 204);">// extractDueCallbacksLocked(long):1050, Choreographer$CallbackQueue<br /></font><font face="consolas" style="" color="#ff0000"><i style="">// 该方法将获取执行时间小于当前时间的 callback 链表集合，链表将被拆分为两段，<br />// 前面一段为需要立即执行的 callback，后面一段为还未到执行时间的 callback，<br />// 由此保证下一次绘制请求的 callback 能够放在后一段的链表中<br /></i></font></span><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">private final class </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">CallbackQueue {<br />    </span></font><font color="#000080" style="font-family: Consolas, monospace; font-size: 8.3pt;"><b>...</b></font><font face="Consolas, monospace"><span style="font-size: 8.3pt;"><br />    </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">CallbackRecord extractDueCallbacksLocked(</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">now) {<br />        CallbackRecord callbacks = </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHead</span><span style="font-family: Consolas, monospace; font-size: 8.3pt;">;<br /></span><span style="font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>        // 如果 HEAD 大于当前时间，说明没有需要立即执行的 callback，直接返回<br /></i></font></span><span style="font-family: Consolas, monospace; font-size: 8.3pt;">        </span><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">(callbacks == </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">|| callbacks.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">dueTime </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">&gt; now) {<br />            </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return null</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">;<br />        }<br /><br />        CallbackRecord last = callbacks;<br />        CallbackRecord next = last.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">;<br />        </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">while </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">(next != </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">) {<br />            </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">(next.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">dueTime </span><span style="font-family: Consolas, monospace; font-size: 8.3pt;">&gt; now) {<br /></span><span style="font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>                // 以当前时间为界，拆分链表<br /></i></font></span><span style="font-family: Consolas, monospace; font-size: 8.3pt;">                last.</span><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">= </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">null</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">;<br />                </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">break</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">;<br />            }<br />            last = next;<br />            next = next.</span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next</span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">;<br />        }<br />        </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHead </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">= next;<br />        </span></font><span style="font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">return </span><font face="Consolas, monospace"><span style="font-size: 8.3pt;">callbacks;<br />    }</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="2725" y="2532" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// extractDueCallbacksLocked(long):1050, Choreographer$CallbackQueue...</text></switch></g><path d="M 2520 2655 Q 2550 2655 2620 2587.5 Q 2690 2520 2713.63 2520" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2718.88 2520 L 2711.88 2523.5 L 2713.63 2520 L 2711.88 2516.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="2515" cy="2655" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="2720" y="3060" width="600" height="260" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 597px; height: 1px; padding-top: 3060px; margin-left: 2725px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// run(long):1037, Choreographer$CallbackRecord<br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">private static final class </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">CallbackRecord {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">CallbackRecord </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">next</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public long </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">dueTime</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Object </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">action</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">; </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">// Runnable or FrameCallback<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 128); font-style: italic;">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Object </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">token</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br /><br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">@UnsupportedAppUsage</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(maxTargetSdk = Build.VERSION_CODES.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">R</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">, trackingBug = </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 255);">170729553</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">)<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">run(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">long </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">frameTimeNanos) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">token </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">== </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold; font-style: italic;">FRAME_CALLBACK_TOKEN</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            ((FrameCallback)</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">action</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">).doFrame(frameTimeNanos);<br />        } </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">else </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">{<br />            ((Runnable)</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">action</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">).</span><span style="background-color: rgb(204, 204, 204);">run</span><span style="background-color: rgb(255, 255, 255);">();<br />        }<br />    }<br />}</span></span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="2725" y="3072" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// run(long):1037, Choreographer$CallbackRecord...</text></switch></g><path d="M 2150 3285 Q 2180 3285 2435 3172.5 Q 2690 3060 2713.63 3060" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2718.88 3060 L 2711.88 3063.5 L 2713.63 3060 L 2711.88 3056.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="2145" cy="3285" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><rect x="3360" y="3060" width="360" height="130" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 357px; height: 1px; padding-top: 3060px; margin-left: 3365px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// run():8787, ViewRootImpl$TraversalRunnable<br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">final class </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">TraversalRunnable </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">implements </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">Runnable {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">@Override<br /></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(128, 128, 0);">    </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">public void </span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">run() {<br />        </span><span style="background-color: rgb(204, 204, 204);">doTraversal</span><span style="background-color: rgb(255, 255, 255);">();<br />    }<br />}</span></span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="3365" y="3072" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// run():8787, ViewRootImpl$TraversalRunnable...</text></switch></g><rect x="3760" y="3060" width="530" height="300" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 527px; height: 1px; padding-top: 3060px; margin-left: 3765px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: &quot;Courier New&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><pre style=""><font face="Consolas, monospace" color="#cccccc" style="background-color: rgb(255, 255, 255);"><span style="font-size: 11.0667px;">// doTraversal():2171, ViewRootImpl<br /></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">void </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">doTraversal() {<br />    </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTraversalScheduled</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTraversalScheduled </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">;<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>        // 移除前面添加的同步屏障<br /></i></font></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mHandler</span><font face="Consolas, monospace" style=""><span style="font-size: 8.3pt;"><span style="background-color: rgb(255, 255, 255);">.getLooper().getQueue().</span><span style="background-color: rgb(255, 255, 0);">removeSyncBarrier</span><span style="background-color: rgb(255, 255, 255);">(</span></span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mTraversalBarrier</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">);<br /><br />        </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mProfile</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            Debug.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">startMethodTracing</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 128, 0); font-weight: bold;">"ViewAncestor"</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">);<br />        }<br /></span><span style="background-color: rgb(255, 255, 255); font-size: 11.0667px;"><font face="consolas" color="#ff0000"><i>        // 执行测量，布局，绘制流程<br /></i></font></span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt;">        performTraversals();<br /><br />        </span><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">if </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">(</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mProfile</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">) {<br />            Debug.</span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; font-style: italic;">stopMethodTracing</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">();<br />            </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(102, 14, 122); font-weight: bold;">mProfile </span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">= </span></font><span style="background-color: rgb(255, 255, 255); font-family: Consolas, monospace; font-size: 8.3pt; color: rgb(0, 0, 128); font-weight: bold;">false</span><font face="Consolas, monospace" style="background-color: rgb(255, 255, 255);"><span style="font-size: 8.3pt;">;<br />        }<br />    }<br />}</span></font></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></pre></div></div></div></foreignObject><text x="3765" y="3072" fill="rgb(0, 0, 0)" font-family="Courier New" font-size="12px">// doTraversal():2171, ViewRootImpl...</text></switch></g><path d="M 2950 3245 Q 2980 3245 3155 3152.5 Q 3330 3060 3353.63 3060" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3358.88 3060 L 3351.88 3063.5 L 3353.63 3060 L 3351.88 3056.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="2945" cy="3245" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><path d="M 3470 3135 Q 3500 3135 3615 3097.5 Q 3730 3060 3753.63 3060" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3758.88 3060 L 3751.88 3063.5 L 3753.63 3060 L 3751.88 3056.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="3465" cy="3135" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><ellipse cx="145" cy="2645" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><ellipse cx="7305" cy="1795" rx="5" ry="5" fill="#000000" stroke="none" pointer-events="all"/><path d="M 145 2633.63 L 145 2510 Q 145 2500 155 2500 L 7295 2500 Q 7305 2500 7305 2490 L 7305 1800" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 145 2638.88 L 141.5 2631.88 L 145 2633.63 L 148.5 2631.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="90" y="240" width="30" height="20" rx="10" ry="10" fill="#ff0000" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 250px; margin-left: 91px;"><div data-drawio-colors="color: #FFFFFF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">1</div></div></div></foreignObject><text x="105" y="254" fill="#FFFFFF" font-family="Helvetica" font-size="12px" text-anchor="middle">1</text></switch></g><rect x="2040" y="310" width="30" height="20" rx="10" ry="10" fill="#ff0000" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 320px; margin-left: 2041px;"><div data-drawio-colors="color: #FFFFFF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">2</div></div></div></foreignObject><text x="2055" y="324" fill="#FFFFFF" font-family="Helvetica" font-size="12px" text-anchor="middle">2</text></switch></g><rect x="1450" y="1170" width="30" height="20" rx="10" ry="10" fill="#ff0000" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 1180px; margin-left: 1451px;"><div data-drawio-colors="color: #FFFFFF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">3</div></div></div></foreignObject><text x="1465" y="1184" fill="#FFFFFF" font-family="Helvetica" font-size="12px" text-anchor="middle">3</text></switch></g><rect x="2770" y="1660" width="30" height="20" rx="10" ry="10" fill="#ff0000" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 1670px; margin-left: 2771px;"><div data-drawio-colors="color: #FFFFFF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">4</div></div></div></foreignObject><text x="2785" y="1674" fill="#FFFFFF" font-family="Helvetica" font-size="12px" text-anchor="middle">4</text></switch></g><rect x="5920" y="1140" width="30" height="20" rx="10" ry="10" fill="#ff0000" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 1150px; margin-left: 5921px;"><div data-drawio-colors="color: #FFFFFF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">5</div></div></div></foreignObject><text x="5935" y="1154" fill="#FFFFFF" font-family="Helvetica" font-size="12px" text-anchor="middle">5</text></switch></g><rect x="7270" y="1770" width="30" height="20" rx="10" ry="10" fill="#ff0000" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 1780px; margin-left: 7271px;"><div data-drawio-colors="color: #FFFFFF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">6</div></div></div></foreignObject><text x="7285" y="1784" fill="#FFFFFF" font-family="Helvetica" font-size="12px" text-anchor="middle">6</text></switch></g><rect x="100" y="2630" width="30" height="20" rx="10" ry="10" fill="#ff0000" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 2640px; margin-left: 101px;"><div data-drawio-colors="color: #FFFFFF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">7</div></div></div></foreignObject><text x="115" y="2644" fill="#FFFFFF" font-family="Helvetica" font-size="12px" text-anchor="middle">7</text></switch></g><rect x="2210" y="3176" width="30" height="20" rx="10" ry="10" fill="#ff0000" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 3186px; margin-left: 2211px;"><div data-drawio-colors="color: #FFFFFF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">8</div></div></div></foreignObject><text x="2225" y="3190" fill="#FFFFFF" font-family="Helvetica" font-size="12px" text-anchor="middle">8</text></switch></g><rect x="3386" y="3126" width="30" height="20" rx="10" ry="10" fill="#ff0000" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 28px; height: 1px; padding-top: 3136px; margin-left: 3387px;"><div data-drawio-colors="color: #FFFFFF; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">9</div></div></div></foreignObject><text x="3401" y="3140" fill="#FFFFFF" font-family="Helvetica" font-size="12px" text-anchor="middle">9</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>