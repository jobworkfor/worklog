<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1551px" height="3269px" viewBox="-0.5 -0.5 1551 3269" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2020-06-04T08:54:08.310Z&quot; agent=&quot;5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36&quot; etag=&quot;6j-2KNF_kF3bK7yGMhXj&quot; version=&quot;13.1.14&quot;&gt;&lt;diagram id=&quot;71aa756b-deb0-e7b1-39c7-49fa7107dbdd&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><path d="M 0 2 L 80 2 L 90 12 L 80 22 L 0 22 L 10 12 Z" fill="#97d077" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 12px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFFFF; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">boot up</div></div></div></foreignObject><text x="45" y="16" fill="#FFFFFF" font-family="Helvetica" font-size="12px" text-anchor="middle">boot up</text></switch></g><path d="M 1390 1232 L 1390 42" fill="none" stroke="#bbbbbb" stroke-miterlimit="10" pointer-events="stroke"/><rect x="1400" y="42" width="115" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 113px; height: 1px; padding-top: 52px; margin-left: 1402px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #BBBBBB; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font face="helvetica">-</font></div></div></div></foreignObject><text x="1402" y="56" fill="#BBBBBB" font-family="Helvetica" font-size="12px">-</text></switch></g><rect x="1270" y="42" width="115" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-end; width: 113px; height: 1px; padding-top: 52px; margin-left: 1270px;"><div style="box-sizing: border-box; font-size: 0; text-align: right; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #BBBBBB; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div style="text-align: left"><span>main</span></div></div></div></div></foreignObject><text x="1383" y="56" fill="#BBBBBB" font-family="Helvetica" font-size="12px" text-anchor="end">main</text></switch></g><path d="M 810 622 L 2050 622" fill="none" stroke="#bbbbbb" stroke-width="4" stroke-miterlimit="10" transform="rotate(90,1430,622)" pointer-events="all"/><rect x="1310" y="2" width="115" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-end; width: 113px; height: 1px; padding-top: 12px; margin-left: 1310px;"><div style="box-sizing: border-box; font-size: 0; text-align: right; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #BBBBBB; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="text-align: left">apexd</span></div></div></div></foreignObject><text x="1423" y="16" fill="#BBBBBB" font-family="Helvetica" font-size="12px" text-anchor="end">apexd</text></switch></g><rect x="1435" y="2" width="115" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 113px; height: 1px; padding-top: 12px; margin-left: 1437px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #BBBBBB; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">-</div></div></div></foreignObject><text x="1437" y="16" fill="#BBBBBB" font-family="Helvetica" font-size="12px">-</text></switch></g><path d="M 420 755 L 420 763.5 Q 420 772 430 772 L 473.63 772" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="420" cy="752" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 478.88 772 L 471.88 775.5 L 473.63 772 L 471.88 768.5 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><path d="M 540 835 L 540 864.5 Q 540 874.5 550 874.5 L 593.63 874.5" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="540" cy="832" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 598.88 874.5 L 591.88 878 L 593.63 874.5 L 591.88 871 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="480" y="752" width="120" height="80" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 759px; margin-left: 482px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/apex/apexd/apex_key.cpp</font><br /></div><div><div><font color="#999999">Status collectApexKeys(bool scanExternalKeys) {</font></div><div><font color="#999999">  for (const auto&amp; dir : kApexPackageBuiltinDirs) {</font></div><div><font color="#999999">    StatusOr&lt;std::vector&lt;KeyPair&gt;&gt; key_pairs =</font></div><div>        collectEmbedddedApexKeysFromDir(dir);</div></div></span></div></div></div></foreignObject><text x="482" y="771" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><rect x="360" y="582" width="120" height="170" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 589px; margin-left: 362px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/apex/apexd/apexd.cpp</font><br /></div><div><div><font color="#999999">1663int onBootstrap() {</font></div><div><font color="#999999">1664  gBootstrap = true;</font></div><div><font color="#999999">1665</font></div><div><font color="#999999">1666  Status preAllocate = preAllocateLoopDevices();</font></div><div><font color="#999999">1667  if (!preAllocate.Ok()) {</font></div><div><font color="#999999">1668    LOG(ERROR) &lt;&lt; "Failed to pre-allocate loop devices : "</font></div><div><font color="#999999">1669               &lt;&lt; preAllocate.ErrorMessage();</font></div><div><font color="#999999">1670  }</font></div><div><font color="#999999">1671</font></div><div>1672  Status status = collectApexKeys();</div><div><br /></div></div></span></div></div></div></foreignObject><text x="362" y="601" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><path d="M 300 585 L 300 614.5 Q 300 624.5 310 624.5 L 353.63 624.5" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="300" cy="582" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 358.88 624.5 L 351.88 628 L 353.63 624.5 L 351.88 621 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="240" y="362" width="120" height="220" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 369px; margin-left: 242px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/apex/apexd/apexd_main.cpp</font><br /></div><div><div><font color="#999999">34int HandleSubcommand(char** argv) {</font></div><div><font color="#999999">35  if (strcmp("--pre-install", argv[1]) == 0) {</font></div><div><font color="#999999">36    LOG(INFO) &lt;&lt; "Preinstall subcommand detected";</font></div><div><font color="#999999">37    return android::apex::RunPreInstall(argv);</font></div><div><font color="#999999">38  }</font></div><div><font color="#999999">39</font></div><div><font color="#999999">40  if (strcmp("--post-install", argv[1]) == 0) {</font></div><div><font color="#999999">41    LOG(INFO) &lt;&lt; "Postinstall subcommand detected";</font></div><div><font color="#999999">42    return android::apex::RunPostInstall(argv);</font></div><div><font color="#999999">43  }</font></div><div><font color="#999999">44</font></div><div><font color="#999999">45  if (strcmp("--bootstrap", argv[1]) == 0) {</font></div><div><font color="#009900">46    LOG(INFO) &lt;&lt; "Bootstrap subcommand detected";</font></div><div>47    return android::apex::onBootstrap();</div></div></span></div></div></div></foreignObject><text x="242" y="381" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><path d="M 180 365 L 180 407 Q 180 417 190 417 L 233.63 417" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="180" cy="362" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 238.88 417 L 231.88 420.5 L 233.63 417 L 231.88 413.5 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="120" y="252" width="120" height="110" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 259px; margin-left: 122px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/apex/apexd/apexd_main.cpp</font><br /></div><div><div><font color="#999999">69int main(int /*argc*/, char** argv) {</font></div><div><font color="#999999">70  // Use CombinedLogger to also log to the kernel log.</font></div><div><font color="#999999">71  android::base::InitLogging(argv, CombinedLogger());</font></div><div><font color="#999999">72</font></div><div><font color="#999999">73  if (argv[1] != nullptr) {</font></div><div>74    return HandleSubcommand(argv);</div></div></span></div></div></div></foreignObject><text x="122" y="271" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><path d="M 60 135 L 60 269.5 Q 60 279.5 70 279.5 L 113.63 279.5" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="60" cy="132" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 118.88 279.5 L 111.88 283 L 113.63 279.5 L 111.88 276 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="0" y="32" width="120" height="100" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 39px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/core/rootdir/init.rc</font><br /></div><div><div><font color="#999999"><div>18on early-init</div></font></div><div><font color="#999999">35    # Run apexd-bootstrap so that APEXes that provide critical libraries</font></div><div><font color="#999999">36    # become available. Note that this is executed as exec_start to ensure that</font></div><div><font color="#999999">37    # the libraries are available to the processes started after this statement.</font></div><div>38    exec_start apexd-bootstrap</div></div></span></div></div></div></foreignObject><text x="2" y="51" fill="#000000" font-family="Helvetica" font-size="12px">/system/core/rootdir...</text></switch></g><rect x="80" y="132" width="310" height="110" rx="5.5" ry="5.5" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 139px; margin-left: 82px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/apex/apexd/apexd.rc</font><br /></div><div><div>8service apexd-bootstrap /system/bin/apexd --bootstrap</div><div style="color: rgb(153 , 153 , 153)">9    critical</div><div style="color: rgb(153 , 153 , 153)">10    user root</div><div style="color: rgb(153 , 153 , 153)">11    group system</div><div style="color: rgb(153 , 153 , 153)">12    oneshot</div><div style="color: rgb(153 , 153 , 153)">13    disabled</div></div></span></div></div></div></foreignObject><text x="82" y="151" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/apexd.rc...</text></switch></g><path d="M 477 2579.5 L 430 2579.5 Q 420 2579.5 420 2587.57 L 420 2595.63" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="480" cy="2579.5" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 420 2600.88 L 416.5 2593.88 L 420 2595.63 L 423.5 2593.88 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="480" y="2542" width="120" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2549px; margin-left: 482px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><span style="color: rgb(153 , 153 , 153)">    if (!key_pairs.Ok()) {</span><br /></div><div><div><font color="#990000">      return Status::Fail(StringLog() &lt;&lt; "Failed to collect keys from " &lt;&lt; dir</font></div><div><font color="#990000">                                      &lt;&lt; " : " &lt;&lt; key_pairs.ErrorMessage());</font></div><div><font color="#999999">    }</font></div></div></span></div></div></div></foreignObject><text x="482" y="2561" fill="#000000" font-family="Helvetica" font-size="12px">if (!key_pairs.O...</text></switch></g><path d="M 660 1005 L 660 1017 Q 660 1027 670 1027 L 713.63 1027" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="660" cy="1002" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 718.88 1027 L 711.88 1030.5 L 713.63 1027 L 711.88 1023.5 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="600" y="832" width="120" height="170" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 839px; margin-left: 602px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/apex/apexd/apex_key.cpp</font><br /></div><div><div><font color="#999999">40StatusOr&lt;std::vector&lt;KeyPair&gt;&gt; collectEmbedddedApexKeysFromDir(</font></div><div><font color="#999999">41    const std::string&amp; dir) {</font></div><div><font color="#009900">42  LOG(INFO) &lt;&lt; "Scanning " &lt;&lt; dir &lt;&lt; " for embedded keys";</font></div></div><div><div><font color="#999999">43  // list of &lt;key_name, key_content&gt; pairs</font></div><div style="color: rgb(153 , 153 , 153)">44  std::vector&lt;KeyPair&gt; ret;</div><div style="color: rgb(153 , 153 , 153)">45  if (access(dir.c_str(), F_OK) != 0 &amp;&amp; errno == ENOENT) {</div><div style="color: rgb(153 , 153 , 153)">46    LOG(INFO) &lt;&lt; "... does not exist. Skipping";</div><div style="color: rgb(153 , 153 , 153)">47    return StatusOr&lt;std::vector&lt;KeyPair&gt;&gt;(std::move(ret));</div><div style="color: rgb(153 , 153 , 153)">48  }</div><div>49  const bool scanBuiltinApexes = isPathForBuiltinApexes(dir);</div></div></span></div></div></div></foreignObject><text x="602" y="851" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><path d="M 660 1315 L 660 1354.5 Q 660 1364.5 670 1364.5 L 713.63 1364.5" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="660" cy="1312" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 718.88 1364.5 L 711.88 1368 L 713.63 1364.5 L 711.88 1361 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="600" y="1212" width="120" height="100" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1219px; margin-left: 602px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><span style="color: rgb(153 , 153 , 153)">50  if (!scanBuiltinApexes) {</span><br /></div><div><div><font color="#999999">51    return StatusOr&lt;std::vector&lt;KeyPair&gt;&gt;::MakeError(</font></div><div><font color="#999999">52        StringLog() &lt;&lt; "Can't scan embedded APEX keys from " &lt;&lt; dir);</font></div><div><font color="#999999">53  }</font></div><div><font color="#999999">54  StatusOr&lt;std::vector&lt;std::string&gt;&gt; apex_files =</font></div><div>55      FindApexFilesByName(dir, scanBuiltinApexes);</div><div><br /></div></div></span></div></div></div></foreignObject><text x="602" y="1231" fill="#000000" font-family="Helvetica" font-size="12px">50  if (!scanBuiltin...</text></switch></g><path d="M 717 1172 L 670 1172 Q 660 1172 660 1182 L 660 1205.63" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="720" cy="1172" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 660 1210.88 L 656.5 1203.88 L 660 1205.63 L 663.5 1203.88 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><path d="M 780 1075 L 780 1125.63" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="780" cy="1072" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 780 1130.88 L 776.5 1123.88 L 780 1125.63 L 783.5 1123.88 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="720" y="1012" width="120" height="60" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1019px; margin-left: 722px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/apex/apexd/apex_file.cpp</font><br /></div><div><div><font color="#999999">507bool isPathForBuiltinApexes(const std::string&amp; path) {</font></div><div><font color="#999999">508  for (const auto&amp; dir : kApexPackageBuiltinDirs) {</font></div><div><font color="#999999"><br /></font></div><div><font color="#999999"><br /></font></div><div><font color="#999999"><br /></font></div><div><font color="#999999"><br /></font></div><div><font color="#999999"><br /></font></div><div><font color="#999999"><br /></font></div><div><br /></div></div></span></div></div></div></foreignObject><text x="722" y="1031" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><rect x="855" y="1062" width="405" height="70" rx="3.5" ry="3.5" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1069px; margin-left: 857px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div><font color="#ffb570">/system/apex/apexd/apex_constants.h</font><br /></div><div><div><font color="#999999">28static constexpr const char* kApexPackageSystemDir = </font><font color="#009900">"/system/apex"</font><font color="#999999">;</font></div><div><font color="#999999">29static const std::vector&lt;std::string&gt; kApexPackageBuiltinDirs = {</font></div><div><font color="#999999">30    kApexPackageSystemDir, </font><font color="#009900">"/product/apex"</font><font color="#999999">};</font></div></div></div></div></div></foreignObject><text x="857" y="1081" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/apex_constants.h...</text></switch></g><path d="M 660 1905 L 660 1914.75 Q 660 1924.5 670 1924.5 L 713.63 1924.5" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="660" cy="1902" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 718.88 1924.5 L 711.88 1928 L 713.63 1924.5 L 711.88 1921 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="600" y="1802" width="120" height="100" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1809px; margin-left: 602px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div style="color: rgb(153 , 153 , 153)">56  if (!apex_files.Ok()) {</div><div style="color: rgb(153 , 153 , 153)">57    return StatusOr&lt;std::vector&lt;KeyPair&gt;&gt;::MakeError(apex_files.ErrorStatus());</div><div style="color: rgb(153 , 153 , 153)">58  }</div><div style="color: rgb(153 , 153 , 153)">59</div><div style="color: rgb(153 , 153 , 153)">60  for (const auto&amp; file : *apex_files) {</div><div>61    StatusOr&lt;ApexFile&gt; apex_file = ApexFile::Open(file);</div><div style="color: rgb(153 , 153 , 153)"><br /></div></span></div></div></div></foreignObject><text x="602" y="1821" fill="#000000" font-family="Helvetica" font-size="12px">56  if (!apex_files....</text></switch></g><path d="M 780 1525 L 780 1577 Q 780 1587 790 1587 L 833.63 1587" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="780" cy="1522" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 838.88 1587 L 831.88 1590.5 L 833.63 1587 L 831.88 1583.5 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="720" y="1312" width="120" height="210" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1319px; margin-left: 722px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/apex/apexd/apex_file.cpp</font><br /></div><div><div><font color="#999999">492StatusOr&lt;std::vector&lt;std::string&gt;&gt; FindApexFilesByName(const std::string&amp; path,</font></div><div><font color="#999999">493                                                       bool include_dirs) {</font></div><div><font color="#999999">494  auto filter_fn =</font></div><div><font color="#999999">495      [include_dirs](const std::filesystem::directory_entry&amp; entry) {</font></div><div><font color="#999999">496        std::error_code ec;</font></div><div><font color="#999999">497        if (entry.is_regular_file(ec) &amp;&amp;</font></div><div><font color="#999999">498            EndsWith(entry.path().filename().string(), kApexPackageSuffix)) {</font></div><div><font color="#999999">499          return true;  // APEX file, take.</font></div><div><font color="#999999">500        }</font></div><div><font color="#999999">501        // Directory and asked to scan for flattened.</font></div><div><font color="#999999">502        return entry.is_directory(ec) &amp;&amp; include_dirs;</font></div><div><font color="#999999">503      };</font></div><div>504  return ReadDir(path, filter_fn);</div></div></span></div></div></div></foreignObject><text x="722" y="1331" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><rect x="1010" y="1432" width="405" height="40" rx="2" ry="2" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1439px; margin-left: 1012px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div><font color="#ffb570">/system/apex/apexd/apex_constants.h</font><br /></div><div><font color="#999999">static constexpr const char* </font>kApexPackageSuffix <font color="#999999">= ".apex"; </font><br /></div></div></div></div></foreignObject><text x="1012" y="1451" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/apex_constants.h...</text></switch></g><path d="M 597 2509.5 L 550 2509.5 Q 540 2509.5 540 2519.5 L 540 2535.63" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="600" cy="2509.5" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 540 2540.88 L 536.5 2533.88 L 540 2535.63 L 543.5 2533.88 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="600" y="2412" width="120" height="130" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2419px; margin-left: 602px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><font color="#999999"><div>62    if (!apex_file.Ok()) {</div><div>63      return StatusOr&lt;std::vector&lt;KeyPair&gt;&gt;::MakeError(</div><div>64          StringLog() &lt;&lt; "Failed to open " &lt;&lt; file &lt;&lt; " : "</div><div>65                      &lt;&lt; apex_file.ErrorMessage());</div><div>66    }</div><div>67    // name of the key is the name of the apex that the key is bundled in</div><div>68    ret.push_back(std::make_pair(apex_file-&gt;GetManifest().name(),</div><div>69                                 apex_file-&gt;GetBundledPublicKey()));</div><div>70  }</div></font></span></div></div></div></foreignObject><text x="602" y="2431" fill="#000000" font-family="Helvetica" font-size="12px">62    if (!apex_file...</text></switch></g><path d="M 780 1965 L 780 1974.75 Q 780 1984.5 790 1984.5 L 833.63 1984.5" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="780" cy="1962" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 838.88 1984.5 L 831.88 1988 L 833.63 1984.5 L 831.88 1981 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="720" y="1912" width="120" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1919px; margin-left: 722px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/apex/apexd/apex_file.cpp</font><br /></div><div><div><font color="#999999">83StatusOr&lt;ApexFile&gt; ApexFile::Open(const std::string&amp; path) {</font></div></div><div><font color="#999999"><div>90  if (isFlattenedApex(path)) {</div><div><br /></div></font></div></span></div></div></div></foreignObject><text x="722" y="1931" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><path d="M 837 2009.5 L 790 2009.5 Q 780 2009.5 780 2017.57 L 780 2025.63" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="840" cy="2009.5" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 780 2030.88 L 776.5 2023.88 L 780 2025.63 L 783.5 2023.88 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="840" y="1972" width="120" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1979px; margin-left: 842px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/apex/apexd/apex_file.cpp</font><br /></div><div><div><div>60// Tests if &lt;path&gt;/manifest.json file exists.</div><div><font color="#999999">61bool isFlattenedApex(const std::string&amp; path) {</font></div></div></div></span></div></div></div></foreignObject><text x="842" y="1991" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><path d="M 780 2145 L 780 2177 Q 780 2187 790 2187 L 833.63 2187" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="780" cy="2142" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 838.88 2187 L 831.88 2190.5 L 833.63 2187 L 831.88 2183.5 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="720" y="2032" width="120" height="110" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2039px; margin-left: 722px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div style="color: rgb(153 , 153 , 153)">110  } else {</div><div style="color: rgb(153 , 153 , 153)">111    flattened = false;</div><div style="color: rgb(153 , 153 , 153)">112</div><div style="color: rgb(153 , 153 , 153)">113    ZipArchiveHandle handle;</div><div style="color: rgb(153 , 153 , 153)">114    auto handle_guard =</div><div style="color: rgb(153 , 153 , 153)">115        android::base::make_scope_guard([&amp;handle] { CloseArchive(handle); });</div><div>116    int ret = OpenArchive(path.c_str(), &amp;handle);</div><div style="color: rgb(153 , 153 , 153)"><br /></div></span></div></div></div></foreignObject><text x="722" y="2051" fill="#000000" font-family="Helvetica" font-size="12px">110  } else {...</text></switch></g><path d="M 717 2382 L 670 2382 Q 660 2382 660 2392 L 660 2405.63" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="720" cy="2382" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 660 2410.88 L 656.5 2403.88 L 660 2405.63 L 663.5 2403.88 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="720" y="2322" width="120" height="80" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2329px; margin-left: 722px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><font color="#999999"><div><span>117    if (ret &lt; 0) {</span><br /></div><div>118      std::string err = StringLog() &lt;&lt; "Failed to open package " &lt;&lt; path &lt;&lt; ": "</div><div>119                                    &lt;&lt; ErrorCodeString(ret);</div><div>120      return StatusOr&lt;ApexFile&gt;::MakeError(err);</div><div>121    }<br /></div></font></span></div></div></div></foreignObject><text x="722" y="2341" fill="#000000" font-family="Helvetica" font-size="12px">117    if (ret &lt; 0)...</text></switch></g><path d="M 837 1717 L 670 1717 Q 660 1717 660 1727 L 660 1795.63" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="840" cy="1717" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 660 1800.88 L 656.5 1793.88 L 660 1795.63 L 663.5 1793.88 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="840" y="1522" width="120" height="260" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1529px; margin-left: 842px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/apex/apexd/apexd_utils.h</font><br /></div><div><div><font color="#999999">102template &lt;typename FilterFn&gt;</font></div><div><font color="#999999">103StatusOr&lt;std::vector&lt;std::string&gt;&gt; ReadDir(const std::string&amp; path,</font></div><div><font color="#999999">104                                           FilterFn fn) {</font></div><div><font color="#999999">105  namespace fs = std::filesystem;</font></div><div><font color="#999999">106  using Status = StatusOr&lt;std::vector&lt;std::string&gt;&gt;;</font></div><div><font color="#999999">107</font></div><div><font color="#999999">108  std::vector&lt;std::string&gt; ret;</font></div><div><font color="#999999">109  auto status = WalkDir(path, [&amp;](const fs::directory_entry&amp; entry) {</font></div><div><font color="#999999">110    if (fn(entry)) {</font></div><div>111      ret.push_back(entry.path());</div><div><font color="#999999">112    }</font></div><div><font color="#999999">113  });</font></div><div><font color="#999999">114  if (!status.Ok()) {</font></div><div><font color="#999999">115    return Status::Fail(status.ErrorMessage());</font></div><div><font color="#999999">116  }</font></div><div><font color="#999999">117  return Status(std::move(ret));</font></div><div><font color="#999999">118}</font></div></div></span></div></div></div></foreignObject><text x="842" y="1541" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><path d="M 837 2277 L 790 2277 Q 780 2277 780 2287 L 780 2315.63" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="840" cy="2277" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 780 2320.88 L 776.5 2313.88 L 780 2315.63 L 783.5 2313.88 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="840" y="2142" width="120" height="180" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2149px; margin-left: 842px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#ffb570">/system/core/libziparchive/zip_archive.cc</font><br /></div><div><div><font color="#999999">488int32_t OpenArchive(const char* fileName, ZipArchiveHandle* handle) {</font></div><div><font color="#999999">489  const int fd = ::android::base::utf8::open(fileName, O_RDONLY | O_BINARY | O_CLOEXEC, 0);</font></div><div><font color="#999999">490  ZipArchive* archive = new ZipArchive(fd, true);</font></div><div><font color="#999999">491  *handle = archive;</font></div><div><font color="#999999">492</font></div><div><font color="#999999">493  if (fd &lt; 0) {</font></div><div><font color="#999999">494    ALOGW("Unable to open '%s': %s", fileName, strerror(errno));</font></div><div><font color="#999999">495    return kIoError;</font></div><div><font color="#999999">496  }</font></div><div><font color="#999999">497</font></div><div><font color="#999999">498  return OpenArchiveInternal(archive, fileName);</font></div></div></span></div></div></div></foreignObject><text x="842" y="2161" fill="#000000" font-family="Helvetica" font-size="12px">/system/core/libzipa...</text></switch></g><rect x="720" y="1132" width="120" height="80" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 1139px; margin-left: 722px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><font color="#999999"><div>509    if (StartsWith(path, dir)) {</div><div>510      return true;</div><div>511    }</div><div>512  }</div><div>513  return false;</div></font></div></span></div></div></div></foreignObject><text x="722" y="1151" fill="#000000" font-family="Helvetica" font-size="12px">509    if (StartsWit...</text></switch></g><rect x="1010" y="2362" width="500" height="70" rx="3.5" ry="3.5" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 498px; height: 1px; padding-top: 2369px; margin-left: 1012px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>// 因为编译残留，导致部分flatten的目录无法使用，也说明flatten和unflattering无法并存</div><div>[   27.093365] apexd: Failed to collect APEX keys : Failed to collect keys from /system/apex : Failed to open /system/apex/com.android.runtime.debug : Failed to open package /system/apex/com.android.runtime.debug: Invalid file<br /></div></div></div></div></foreignObject><text x="1012" y="2381" fill="#000000" font-family="Helvetica" font-size="12px">// 因为编译残留，导致部分flatten的目录无法使用，也说明flatten和unflattering无法并存...</text></switch></g><path d="M 420 2705 L 420 2784.5 Q 420 2794.5 430 2794.5 L 473.63 2794.5" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="420" cy="2702" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 478.88 2794.5 L 471.88 2798 L 473.63 2794.5 L 471.88 2791 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="360" y="2602" width="120" height="100" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2609px; margin-left: 362px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><span><div><span style="color: rgb(153 , 153 , 153)">1673  if (!status.Ok()) {</span><br /></div><div><div><font color="#990000">1674    LOG(ERROR) &lt;&lt; "Failed to collect APEX keys : " &lt;&lt; status.ErrorMessage();</font></div><div><font color="#999999">1675    return 1;</font></div><div><font color="#999999">1676  }</font></div></div><div><div style="color: rgb(153 , 153 , 153)">1678  // Activate built-in APEXes for processes launched before /data is mounted.</div><div>1679  status = scanPackagesDirAndActivate(kApexPackageSystemDir);</div></div></span></div></div></div></foreignObject><text x="362" y="2621" fill="#000000" font-family="Helvetica" font-size="12px">1673  if (!status.Ok...</text></switch></g><rect x="480" y="2702" width="120" height="370" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 2709px; margin-left: 482px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div><font color="#ffb570">/system/apex/apexd/apexd.cpp</font><br /></div><div><div><font color="#999999">1308Status scanPackagesDirAndActivate(const char* apex_package_dir) {</font></div><div><font color="#999999">1309  LOG(INFO) &lt;&lt; "Scanning " &lt;&lt; apex_package_dir &lt;&lt; " looking for APEX packages.";</font></div><div><font color="#999999">1310</font></div><div><font color="#999999">1311  const bool scanBuiltinApexes = isPathForBuiltinApexes(apex_package_dir);</font></div><div><font color="#999999">1312  StatusOr&lt;std::vector&lt;std::string&gt;&gt; scan =</font></div><div><font color="#999999">1313      FindApexFilesByName(apex_package_dir, scanBuiltinApexes);</font></div><div><font color="#999999">1314  if (!scan.Ok()) {</font></div><div><font color="#999999">1315    return Status::Fail(StringLog() &lt;&lt; "Failed to scan " &lt;&lt; apex_package_dir</font></div><div><font color="#999999">1316                                    &lt;&lt; " : " &lt;&lt; scan.ErrorMessage());</font></div><div><font color="#999999">1317  }</font></div><div><font color="#999999">1318</font></div><div><font color="#999999">1319  const auto&amp; packages_with_code = GetActivePackagesMap();</font></div><div><font color="#999999">1320</font></div><div><font color="#999999">1321  std::vector&lt;std::string&gt; failed_pkgs;</font></div><div><font color="#999999">1322  size_t activated_cnt = 0;</font></div><div><font color="#999999">1323  size_t skipped_cnt = 0;</font></div><div><font color="#999999">1324  for (const std::string&amp; name : *scan) {</font></div><div><font color="#009900">1325    LOG(INFO) &lt;&lt; "Found " &lt;&lt; name;</font></div><div><span style="color: rgb(153 , 153 , 153)">...</span></div><div>1346    if (!<font style="background-color: rgb(102 , 51 , 0)" color="#ffffff">kUpdatable</font><font color="#ffffff"> </font>&amp;&amp; !apex_file-&gt;IsFlattened()) {<br /></div><div><font color="#990000">1347      LOG(INFO) &lt;&lt; "Skipping activation of non-flattened apex package " &lt;&lt; name</font></div><div><font color="#990000">1348                &lt;&lt; " because device doesn't support it";</font></div><div><font color="#999999">1349      skipped_cnt++;</font></div><div><font color="#999999">1350      continue;</font></div><div><font color="#999999">1351    }</font></div></div></div></div></div></foreignObject><text x="482" y="2721" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><rect x="787" y="3022" width="453" height="110" rx="5.5" ry="5.5" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 451px; height: 1px; padding-top: 3029px; margin-left: 789px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>// ro.apex.updatable属性没有被编译进去导致</div><div>[   27.487140] apexd: Found /system/apex/com.android.resolv.apex</div><div>[   27.493625] apexd: Skipping activation of non-flattened apex package /system/apex/com.android.resolv.apex because device doesn't support it</div><div>[   27.506870] apexd: Found /system/apex/com.android.media.swcodec.apex</div><div>[   27.513962] apexd: Skipping activation of non-flattened apex package /system/apex/com.android.media.swcodec.apex because device doesn't support it</div></div></div></div></foreignObject><text x="789" y="3041" fill="#000000" font-family="Helvetica" font-size="12px">// ro.apex.updatable属性没有被编译进去导致...</text></switch></g><path d="M 540 3185 L 540 3195.3 Q 540 3205.3 550 3205.29 L 593.63 3205.26" fill="none" stroke="#9673a6" stroke-miterlimit="10" pointer-events="stroke"/><ellipse cx="540" cy="3182" rx="3" ry="3" fill="#9673a6" stroke="#9673a6" pointer-events="all"/><path d="M 598.88 3205.25 L 591.88 3208.76 L 593.63 3205.26 L 591.88 3201.76 Z" fill="#9673a6" stroke="#9673a6" stroke-miterlimit="10" pointer-events="all"/><rect x="480" y="3132" width="120" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3139px; margin-left: 482px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div><font color="#ffb570">/system/apex/apexd/apexd.cpp</font><br /></div><div><div><font color="#999999">113static const bool </font>kUpdatable <font color="#999999">=</font></div><div><font color="#999999">114    android::sysprop::ApexProperties::updatable().value_or(false);</font></div></div></div></div></div></foreignObject><text x="482" y="3151" fill="#000000" font-family="Helvetica" font-size="12px">/system/apex/apexd/a...</text></switch></g><rect x="600" y="3192" width="120" height="53" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 3199px; margin-left: 602px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div><font color="#ffb570">out/soong/.intermediates/system/apex/apexd/sysprop/libcom.android.sysprop.apex/android_arm64_armv8-a_core_static/gen/sysprop/ApexProperties.sysprop.cpp</font><br /></div><div><div><font color="#999999">152 std::optional&lt;bool&gt; updatable() {</font></div><div>153     return GetProp&lt;std::optional&lt;bool&gt;&gt;(<font color="#009900">"ro.apex.updatable"</font>);</div><div><font color="#999999">154 }</font></div></div><div><br /></div></div></div></div></foreignObject><text x="602" y="3211" fill="#000000" font-family="Helvetica" font-size="12px">out/soong/.intermedi...</text></switch></g><path d="M 480 3112 L 570 3112 L 580 3122 L 570 3132 L 480 3132 L 490 3122 Z" fill="#97d077" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 3122px; margin-left: 481px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #FFFFFF; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">kUpdatable </div></div></div></foreignObject><text x="530" y="3126" fill="#FFFFFF" font-family="Helvetica" font-size="12px" text-anchor="middle">kUpdatable </text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>