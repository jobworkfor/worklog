# Notification发送和显示流程

## 环境准备
准备一个实验环境对于流程分析十分有利，这里使用`Android6.0`原生代码和模拟器来探索`Notification`显示的流程。包括如下几个方面的内容：
1. 编译Android6.0.1_r10源码
2. 运行模拟器
3. 配置Debug环境

上面每项内容在网络上都有丰富的资料，自行查找完成。

### 分析案例
本文借Messaging应用来SMS时弹出Notification为例，分析从`NotificationManager.notify`开始到`View`显示的过程。

Messaging应用本身接收SMS的流程在此忽略，这里给出应用最后调用`NotificationManager.notify()`时的调用栈，即本文的起跑线为：

    "IntentService[ActionService]@5196" prio=5 runnable
      java.lang.Thread.State: RUNNABLE
          at android.app.NotificationManager.notify(NotificationManager.java:210)
          at android.support.v4.app.NotificationManagerCompatEclair.postNotification(NotificationManagerCompatEclair.java:30)
          at android.support.v4.app.NotificationManagerCompat$ImplEclair.postNotification(NotificationManagerCompat.java:152)
          at android.support.v4.app.NotificationManagerCompat.notify(NotificationManagerCompat.java:225)
          at com.android.messaging.datamodel.BugleNotifications.doNotify(BugleNotifications.java:976)
          - locked <0x196> (a java.lang.Class)
          at com.android.messaging.datamodel.BugleNotifications.fireOffNotification(BugleNotifications.java:841)
          at com.android.messaging.datamodel.BugleNotifications.sendNotification(BugleNotifications.java:766)
          at com.android.messaging.datamodel.BugleNotifications.processAndSend(BugleNotifications.java:518)
          at com.android.messaging.datamodel.BugleNotifications.createMessageNotification(BugleNotifications.java:606)
          at com.android.messaging.datamodel.BugleNotifications.update(BugleNotifications.java:185)
          at com.android.messaging.datamodel.action.ReceiveSmsMessageAction.executeAction(ReceiveSmsMessageAction.java:169)
          at com.android.messaging.datamodel.action.ActionServiceImpl.executeAction(ActionServiceImpl.java:305)
          at com.android.messaging.datamodel.action.ActionServiceImpl.onHandleIntent(ActionServiceImpl.java:267)
          at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:66)
          at android.os.Handler.dispatchMessage(Handler.java:102)
          at android.os.Looper.loop(Looper.java:148)
          at android.os.HandlerThread.run(HandlerThread.java:61)


## 流程总览

### Android Android6.0.1_r1
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2217px" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36&quot; version=&quot;7.9.8&quot; editor=&quot;www.draw.io&quot; type=&quot;device&quot;&gt;&lt;diagram name=&quot;notify&quot; id=&quot;91f8434d-d1a7-73df-6992-6dee42290c9e&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;edit=_blank&amp;layers=1');}}})(this);" viewBox="0 0 2217 1636" style="cursor:pointer;max-width:100%;max-height:1636px;"><defs/><g transform="translate(0.5,0.5)"><path d="M 150 235 L 150 258.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 150 263.88 L 146.5 256.88 L 150 258.63 L 153.5 256.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 50 235 L 50 318.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 50 323.88 L 46.5 316.88 L 50 318.63 L 53.5 316.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1.5,101.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="524" height="124" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.ezx.probe.NotificationProbe#onClick</font><br /></div><div><font color="#7ea6e0">    public void onClick(View v)<br /></font></div><div><div>            Notification notification = new Notification.Builder(this)</div><div>                    .setSmallIcon(R.drawable.ic_launcher)</div><div>                    .setWhen(System.currentTimeMillis())</div><div>                    .setContentTitle("---------------bob_log_tag---------------")</div><div>                    .setContentText("---------------bob_log_tag_text---------------")  // the contents of the entry</div><div>                    .setContentIntent(contentIntent)  // The intent to send when the entry is clicked</div><div>                    .build();</div></div></div></div></foreignObject><text x="262" y="68" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(101.5,271.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="479" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.app.Notification.Builder#Builder(android.content.Context, android.app.Notification)</font><br /></div><div><font color="#7ea6e0">        public Builder(Context context, Notification toAdopt)<br /></font></div><div>                mN = new Notification();<br /></div></div></div></foreignObject><text x="240" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 50 345 L 50 368.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 50 373.88 L 46.5 366.88 L 50 368.63 L 53.5 366.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1.5,331.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="312" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>            mNM.notify(MOOD_NOTIFICATIONS, notification);</div><div><br /></div></div></div></foreignObject><text x="156" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; mNM.notify(MOOD_NOTIFICATIONS, notification);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;</text></switch></g><path d="M 50 445 L 50 468.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 50 473.88 L 46.5 466.88 L 50 468.63 L 53.5 466.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1.5,381.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="478" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.app.NotificationManager#notifyAsUser</font><br /></div><div><div><font color="#7ea6e0">    public void notifyAsUser(String tag, int id, Notification notification, UserHandle user)</font></div><div><div>            service.enqueueNotificationWithTag(pkg, mContext.getOpPackageName(), tag, id,</div><div>                    copy, idOut, user.getIdentifier());</div></div></div></div></div></foreignObject><text x="239" y="33" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 50 545 L 50 568.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 50 573.88 L 46.5 566.88 L 50 568.63 L 53.5 566.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1.5,481.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="623" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.app.INotificationManager.Stub.Proxy#enqueueNotificationWithTag</font><br /></div><div><div><div><font color="#7ea6e0">@Override public void enqueueNotificationWithTag(java.lang.String pkg, java.lang.String opPkg, java.lang.String tag, </font></div><div><font color="#7ea6e0">int id, android.app.Notification notification, int[] idReceived, int userId) throws android.os.RemoteException</font></div></div><div><div>notification.writeToParcel(_data, 0);</div><div><br /></div></div></div></div></div></foreignObject><text x="312" y="40" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 150 625 L 150 648.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 150 653.88 L 146.5 646.88 L 150 648.63 L 153.5 646.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 50 625 L 50 928.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 50 933.88 L 46.5 926.88 L 50 928.63 L 53.5 926.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1.5,581.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="271" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.app.Notification#writeToParcel</font><br /></div><div><div><div><font color="#7ea6e0">    public void writeToParcel(Parcel parcel, int flags)</font></div><div><div>            writeToParcelImpl(parcel, flags);</div></div></div></div><div><br /></div></div></div></foreignObject><text x="136" y="33" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 150 705 L 150 728.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 150 733.88 L 146.5 726.88 L 150 728.63 L 153.5 726.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(101.5,661.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="306" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.app.Notification#writeToParcelImpl</font><br /></div><div><div><div><div><font color="#7ea6e0">    private void writeToParcelImpl(Parcel parcel, int flags) {</font></div><div><div>            contentIntent.writeToParcel(parcel, 0);</div></div></div></div></div></div></div></foreignObject><text x="153" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 150 785 L 150 808.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 150 813.88 L 146.5 806.88 L 150 808.63 L 153.5 806.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(101.5,741.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="263" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.app.PendingIntent#writeToParcel</font><br /></div><div><div><font color="#7ea6e0">    public void writeToParcel(Parcel out, int flags) {</font></div><div><div>            listener.onMarshaled(this, out, flags);</div></div></div></div></div></foreignObject><text x="132" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 150 865 L 150 888.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 150 893.88 L 146.5 886.88 L 150 888.63 L 153.5 886.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(101.5,821.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="310" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.app.Notification#writeToParcel</font><br /></div><div><div><font color="#7ea6e0">    public void writeToParcel(Parcel parcel, int flags) {</font></div><div><div>                                allPendingIntents = new ArraySet&lt;&gt;();</div></div></div></div></div></foreignObject><text x="155" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 200 958 L 200 966.5 Q 200 975 210 975 L 630 975 Q 640 975 640 965 L 640 83 Q 640 73 650 73 L 803.63 73" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 808.88 73 L 801.88 76.5 L 803.63 73 L 801.88 69.5 Z" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(101.5,901.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="249" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">                            allPendingIntents.add(intent);</div></div></foreignObject><text x="125" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 960 125 L 960 148.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 960 153.88 L 956.5 146.88 L 960 148.63 L 963.5 146.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 860 125 L 860 438.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 860 443.88 L 856.5 436.88 L 860 438.63 L 863.5 436.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(811.5,61.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="635" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/src/core/java/android/app/INotificationManager.java</font><br /></div><div><font color="#7ea6e0"><div>    private boolean execTransact(int code, long dataObj, long replyObj,</div><div>            int flags) {</div></font></div><div><div>            res = onTransact(code, data, reply, flags);</div></div></div></div></foreignObject><text x="318" y="33" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 960 265 L 960 278.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 960 283.88 L 956.5 276.88 L 960 278.63 L 963.5 276.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(911.5,161.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="372" height="96" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.app.INotificationManager.Stub#onTransact</font><br /></div><div><font color="#7ea6e0"><div>    private boolean execTransact(int code, long dataObj, long replyObj,</div><div>            int flags) {</div></font></div><div><div>case TRANSACTION_enqueueNotificationWithTag:</div><div>{</div><div>_arg4 = android.app.Notification.CREATOR.createFromParcel(data);</div><div>}</div></div></div></div></foreignObject><text x="186" y="54" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 960 335 L 960 348.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 960 353.88 L 956.5 346.88 L 960 348.63 L 963.5 346.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(911.5,291.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="305" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">frameworks/base/core/java/android/app/Notification.java</font><br /></div><div><font color="#7ea6e0"><div>        public Notification createFromParcel(Parcel parcel) {</div></font></div><div><div>            return new Notification(parcel);</div></div></div></div></foreignObject><text x="153" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(911.5,361.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="415" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.app.Notification#Notification(android.os.Parcel)</font><br /></div><div><font color="#7ea6e0"><div>    public Notification(Parcel parcel) {</div></font></div><div><div>        readFromParcelImpl(parcel);</div><div>        allPendingIntents = (ArraySet&lt;PendingIntent&gt;) parcel.readArraySet(null);</div></div><div><br /></div></div></div></foreignObject><text x="208" y="40" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 860 485 L 860 518.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 860 523.88 L 856.5 516.88 L 860 518.63 L 863.5 516.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(811.5,451.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="438" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>_arg4 = android.app.Notification.CREATOR.createFromParcel(data);</div><div>this.enqueueNotificationWithTag(_arg0, _arg1, _arg2, _arg3, _arg4, _arg5, _arg6);</div><div><br /></div></div></div></foreignObject><text x="219" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">&lt;div&gt;_arg4 = android.app.Notification.CREATOR.createFromParcel(data);&lt;/div&gt;&lt;div&gt;this.enqueueNotificationWithTag(_arg0, _arg1, _arg2, _arg3, _arg4, _arg5, _arg6);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;</text></switch></g><path d="M 860 925 L 860 948.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 860 953.88 L 856.5 946.88 L 860 948.63 L 863.5 946.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 860 695 L 860 878.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 860 883.88 L 856.5 876.88 L 860 878.63 L 863.5 876.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 960 695 L 960 716.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 960 721.88 L 956.5 714.88 L 960 716.63 L 963.5 714.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(811.5,531.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="536" height="166" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">/frameworks/base/services/core/java/com/android/server/notification/NotificationManagerService.java</font><br /></div><div><font color="#7ea6e0"><div>    void enqueueNotificationInternal(final String pkg, final String opPkg, final int callingUid,</div><div>            final int callingPid, final String tag, final int id, final Notification notification,</div><div>            int[] idOut, int incomingUserId) {</div></font></div><div><div><div><div><font color="#ffffff" style="background-color: rgb(204 , 204 , 204)">        if (DBG) {</font></div><div><font color="#ffffff" style="background-color: rgb(204 , 204 , 204)">            Slog.v(TAG, "enqueueNotificationInternal: pkg=" + pkg + " id=" + id</font></div><div><font color="#ffffff" style="background-color: rgb(204 , 204 , 204)">                    + " notification=" + notification);</font></div><div><font color="#ffffff" style="background-color: rgb(204 , 204 , 204)">        }</font></div></div><div>        final StatusBarNotification <font color="#0000ff">n</font> = new StatusBarNotification(</div><div>                pkg, opPkg, id, tag, callingUid, callingPid, 0, <font color="#ff0000">notification</font>,</div><div>                user);</div></div><div><br /></div></div></div></div></foreignObject><text x="268" y="89" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 860 1035 L 860 1053.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 860 1058.88 L 856.5 1051.88 L 860 1053.63 L 863.5 1051.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(811.5,961.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="499" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.android.server.notification.NotificationManagerService.EnqueueNotificationRunnable#run</font><br /></div><div><font color="#7ea6e0"><div>        public void run() {</div></font></div><div><div>            synchronized (mNotificationList) {</div></div><div><div><div>                final StatusBarNotification n = r.sbn;</div></div></div><div><div>                if (<font color="#990000">DBG</font>)<font color="#ffffff" style="background-color: rgb(204 , 204 , 204)"> Slog.d(TAG, "EnqueueNotificationRunnable.run for: " + n.getKey());</font></div></div></div></div></foreignObject><text x="250" y="40" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 860 1505 L 860 1528.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 860 1533.88 L 856.5 1526.88 L 860 1528.63 L 863.5 1526.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 860 1325 L 860 1428.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 860 1433.88 L 856.5 1426.88 L 860 1428.63 L 863.5 1426.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 960 1325 L 960 1348.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 960 1353.88 L 956.5 1346.88 L 960 1348.63 L 963.5 1346.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(811.5,1261.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="536" height="82" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.android.server.notification.NotificationManagerService.NotificationListeners#notifyPostedLocked</font><br /></div><div><font color="#7ea6e0"><div>        public void notifyPostedLocked(StatusBarNotification sbn, StatusBarNotification oldSbn) {</div></font></div><div><div><div>            TrimCache trimCache = new TrimCache(<font color="#ff0000">sbn</font>);</div></div><div><div>                final StatusBarNotification <font color="#0000ff">sbnToPost</font> =  trimCache.ForListener(info);</div></div><div><br /></div><div><br /></div></div></div></div></foreignObject><text x="268" y="47" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 1010 1585 L 1420 1585 Q 1430 1585 1430 1575 L 1430 108 Q 1430 98 1440 98 L 1588.63 98" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 1593.88 98 L 1586.88 101.5 L 1588.63 98 L 1586.88 94.5 Z" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(811.5,1541.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="497" height="82" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.android.server.notification.NotificationManagerService.NotificationListeners#notifyPosted</font><br /></div><div><div><div><font color="#7ea6e0">        private void notifyPosted(final ManagedServiceInfo info,</font></div><div><font color="#7ea6e0">                final StatusBarNotification sbn, NotificationRankingUpdate rankingUpdate) {</font></div></div><div><div><div>            final INotificationListener listener = (INotificationListener)info.service;</div><div>            StatusBarNotificationHolder <font color="#0000ff">sbnHolder</font> = new StatusBarNotificationHolder(<font color="#ff0000">sbn</font>);</div></div><div><b>                listener.onNotificationPosted(sbnHolder, rankingUpdate);</b></div></div></div></div></div></foreignObject><text x="249" y="47" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 200 535 L 1240 535" fill="none" stroke="#666666" stroke-width="4" stroke-miterlimit="10" transform="rotate(90,720,535)" pointer-events="none"/><g transform="translate(732.5,112.5)rotate(-90,0,0)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="87" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">system_process</div></div></foreignObject><text x="44" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">system_process</text></switch></g><g transform="translate(687.5,107.5)rotate(-90,0,0)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="79" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">com.ezx.probe</div></div></foreignObject><text x="40" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">com.ezx.probe</text></switch></g><path d="M 980 535 L 2020 535" fill="none" stroke="#666666" stroke-width="4" stroke-miterlimit="10" transform="rotate(90,1500,535)" pointer-events="none"/><g transform="translate(1512.5,127.5)rotate(-90,0,0)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="117" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">com.android.systemui</div></div></foreignObject><text x="59" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">com.android.systemui</text></switch></g><g transform="translate(1472.5,112.5)rotate(-90,0,0)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="87" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">system_process</div></div></foreignObject><text x="44" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">system_process</text></switch></g><path d="M 1645 225 L 1645 253.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1645 258.88 L 1641.5 251.88 L 1645 253.63 L 1648.5 251.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1596.5,61.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="555" height="152" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.service.notification.NotificationListenerService.NotificationListenerWrapper#onNotificationPosted</font><br /></div><div><div><div><font color="#7ea6e0">        public void onNotificationPosted(IStatusBarNotificationHolder sbnHolder,</font></div><div><font color="#7ea6e0">                NotificationRankingUpdate update) {</font></div></div><div><div>                sbn = sbnHolder.get();</div></div></div><div><div>            synchronized (mLock) {</div><div>                applyUpdateLocked(update);</div><div>                if (sbn != null) {</div><div>                    mHandler.obtainMessage(MyHandler.<font color="#006600">MSG_ON_NOTIFICATION_POSTED</font>,</div><div>                            args).<b>sendToTarget</b>();</div><div>                }</div><div>            }</div></div></div></div></foreignObject><text x="278" y="82" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 1645 345 L 1645 373.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1645 378.88 L 1641.5 371.88 L 1645 373.63 L 1648.5 371.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1596.5,266.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="440" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.service.notification.NotificationListenerService.MyHandler#handleMessage</font><br /></div><div><div><div><font color="#7ea6e0">        public void handleMessage(Message msg) {</font></div></div><div><div>                case <font color="#006600">MSG_ON_NOTIFICATION_POSTED</font>: {</div><div>                    onNotificationPosted(sbn, rankingMap);</div><div>                } break;</div></div></div></div></div></foreignObject><text x="220" y="40" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 1645 515 L 1645 548.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 1645 553.88 L 1641.5 546.88 L 1645 548.63 L 1648.5 546.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1596.5,386.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="619" height="124" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><span><font color="#7ea6e0">BaseStatusBar.</font></span><span><font color="#7ea6e0">mNotificationListener@</font></span><font color="#7ea6e0">android.service.notification.NotificationListenerService#onNotificationPosted()</font></div><div><div><div><font color="#7ea6e0">        public void onNotificationPosted(final StatusBarNotification sbn,</font></div><div><font color="#7ea6e0">                final RankingMap rankingMap) {</font></div></div><div><div>                mHandler.post(new Runnable() {</div><div>                    @Override</div><div>                    public void run() {</div><div>                        ...</div><div>                    }</div><div>                });</div></div></div></div></div></foreignObject><text x="310" y="68" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 1645 605 L 1645 638.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1645 643.88 L 1641.5 636.88 L 1645 638.63 L 1648.5 636.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1596.5,561.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="368" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">java.lang.Runnable#run</font><br /></div><div><div><div><font color="#7ea6e0">                    public void run() {</font></div></div><div><div>                            addNotification(sbn, rankingMap, null /* oldEntry */);</div></div></div></div></div></foreignObject><text x="184" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 1645 715 L 1645 748.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1645 753.88 L 1641.5 746.88 L 1645 748.63 L 1648.5 746.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1596.5,651.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="450" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.android.systemui.statusbar.phone.PhoneStatusBar#addNotification</font><br /></div><div><div><div><font color="#7ea6e0">    public void addNotification(StatusBarNotification notification, RankingMap ranking,</font></div><div><font color="#7ea6e0">            Entry oldEntry) {</font></div></div><div><div>        addNotificationViews(shadeEntry, ranking);</div></div></div><div><br /></div></div></div></foreignObject><text x="225" y="40" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(1596.5,761.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="392" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.android.systemui.statusbar.BaseStatusBar#addNotificationViews</font><br /></div><div><div><div><font color="#7ea6e0">    protected void addNotificationViews(Entry entry, RankingMap ranking) {</font></div></div><div><div><div>        updateNotifications();</div></div></div></div></div></div></foreignObject><text x="196" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(1.5,941.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="251" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>            parcel.writeArraySet(allPendingIntents);</div></div></div></foreignObject><text x="126" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; parcel.writeArraySet(allPendingIntents);&lt;/div&gt;</text></switch></g><path d="M 860 1110 L 860 1133.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 860 1138.88 L 856.5 1131.88 L 860 1133.63 L 863.5 1131.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(811.5,1066.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="318" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>                int index = indexOfNotificationLocked(n.getKey());</div><div><div>                if (index &lt; 0) {</div><div>                    mNotificationList.add(r);</div></div><div><br /></div></div></div></foreignObject><text x="159" y="33" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 860 1170 L 860 1188.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 860 1193.88 L 856.5 1186.88 L 860 1188.63 L 863.5 1186.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(811.5,1146.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="295" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><div>                    mListeners.notifyPostedLocked(n, oldSbn);</div></div></div></div></foreignObject><text x="148" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(811.5,891.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="379" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>        final NotificationRecord <font color="#0000ff">r</font>= new NotificationRecord(getContext(),<font color="#ff0000">n</font>);</div><div>        mHandler.post(new EnqueueNotificationRunnable(userId,<font color="#ff0000">r</font>));</div></div></div></foreignObject><text x="190" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 960 788 L 960 808.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 960 813.88 L 956.5 806.88 L 960 808.63 L 963.5 806.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(911.5,729.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="430" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">frameworks/base/core/java/android/service/notification/StatusBarNotification.java</font><br /></div><div><font color="#7ea6e0"><div>    public StatusBarNotification(String pkg, String opPkg, int id, String tag, int uid,</div><div>            int initialPid, int score, Notification notification, UserHandle user) {</div></font></div><div><div><div>        this.key = key();</div></div><div><br /></div></div></div></div></foreignObject><text x="215" y="40" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(911.5,821.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="432" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><div><font color="#7ea6e0">    private String key() {</font></div></div><div><div><div><div>        String sbnKey = user.getIdentifier() + "|" + pkg + "|" + id + "|" + tag + "|" + uid;</div></div></div></div><div><br /></div></div></div></foreignObject><text x="216" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(811.5,1441.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="283" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>                mHandler.post(new Runnable() {</div><div>                    @Override</div><div>                    public void run() {</div><div>                        notifyPosted(info, <font color="#ff0000">sbnToPost</font>, update);</div></div></div></foreignObject><text x="142" y="33" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(911.5,1361.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="533" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">frameworks/base/services/core/java/com/android/server/notification/NotificationManagerService.java</font><br /></div><div><div><div><font color="#7ea6e0">        StatusBarNotification ForListener(ManagedServiceInfo info) {</font></div><div><div>                    sbnCloneLight = heavy.cloneLight();</div></div></div><div><div>                return sbnCloneLight;</div></div><div><br /></div></div></div></div></foreignObject><text x="267" y="40" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 860 1225 L 860 1248.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 860 1253.88 L 856.5 1246.88 L 860 1248.63 L 863.5 1246.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(811.5,1201.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="187" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>                buzzBeepBlinkLocked(r);</div><div><br /></div></div></div></foreignObject><text x="94" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(1.5,20.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="218" height="28" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 25px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 219px; white-space: nowrap; word-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Notification -- Notify</div></div></foreignObject><text x="109" y="27" fill="#000000" text-anchor="middle" font-size="25px" font-family="Helvetica">Notification -- Notify</text></switch></g><g transform="translate(1.5,61.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="89" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 90px; white-space: nowrap; word-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span>process diagram</span></div></div></foreignObject><text x="45" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">&lt;span&gt;process diagram&lt;/span&gt;</text></switch></g></g></svg>

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2403px" version="1.1" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36&quot; version=&quot;7.9.8&quot; editor=&quot;www.draw.io&quot; type=&quot;device&quot;&gt;&lt;diagram name=&quot;cancel&quot; id=&quot;bacc0d19-32a9-c8e3-54a5-d213727322bc&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" onclick="(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&amp;&amp;src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&amp;&amp;!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&amp;&amp;evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&amp;lightbox=1&amp;edit=_blank');}}})(this);" viewBox="0 0 2403 1474" style="cursor:pointer;max-width:100%;max-height:1474px;"><defs/><g transform="translate(0.5,0.5)"><g transform="translate(41.5,88.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="254" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.ezx.probe.NotificationProbe#onClick</font><br /></div><div><font color="#7ea6e0">    public void onClick(View v)<br /></font></div><div><div>            mNM.cancel(MOOD_NOTIFICATIONS);</div></div></div></div></foreignObject><text x="127" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 90 132 L 90 155.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 90 160.88 L 86.5 153.88 L 90 155.63 L 93.5 153.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(41.5,168.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="392" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.app.NotificationManager#cancelAsUser</font><br /></div><div><div><div><font color="#7ea6e0">    public void cancelAsUser(String tag, int id, UserHandle user)</font></div></div><div><div>            service.cancelNotificationWithTag(pkg, tag, id, user.getIdentifier());</div></div></div><div><br /></div></div></div></foreignObject><text x="196" y="33" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 140 212 L 140 222 Q 140 232 150 232 L 450 232 Q 460 232 460 222 L 460 82 Q 460 72 470 72 L 593.63 72" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 598.88 72 L 591.88 75.5 L 593.63 72 L 591.88 68.5 Z" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(601.5,48.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="460" height="110" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.app.INotificationManager.Stub#cancelNotificationWithTag</font><br /></div><div><font color="#7ea6e0"><div>        public void cancelNotificationWithTag(String pkg, String tag, int id, int userId) {</div></font></div><div><div>            cancelNotification(Binder.getCallingUid(), Binder.getCallingPid(), pkg, tag, id, 0,</div><div>                    (Binder.getCallingUid() == Process.SYSTEM_UID</div><div>                            ? 0 : Notification.FLAG_FOREGROUND_SERVICE)</div><div>                            | (Binder.getCallingUid() == Process.SYSTEM_UID</div><div>                            ? 0 : Notification.FLAG_AUTOGROUP_SUMMARY), false, userId,</div><div>                    REASON_APP_CANCEL, null);</div></div></div></div></foreignObject><text x="230" y="61" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 650 162 L 650 185.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 650 190.88 L 646.5 183.88 L 650 185.63 L 653.5 183.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 650 382 L 650 410.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 650 415.88 L 646.5 408.88 L 650 410.63 L 653.5 408.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(601.5,198.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="457" height="180" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.android.server.notification.NotificationManagerService#cancelNotification</font><br /></div><div><font color="#7ea6e0"><div>    void cancelNotification(final int callingUid, final int callingPid,</div><div>            final String pkg, final String tag, final int id,</div><div>            final int mustHaveFlags, final int mustNotHaveFlags, final boolean sendDelete,</div><div>            final int userId, final int reason, final ManagedServiceInfo listener) {</div></font></div><div><div>mHandler.post(new Runnable() {</div><div>            @Override</div><div>            public void run() {</div><div>                    ...</div><div>                    }</div><div>                }</div><div>            }</div><div>        });</div></div></div></div></foreignObject><text x="229" y="96" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 650 542 L 650 560.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 650 565.88 L 646.5 558.88 L 650 560.63 L 653.5 558.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(601.5,423.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="347" height="110" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">java.lang.Runnable#run</font><br /></div><div><font color="#7ea6e0"><div>            public void run() {</div></font></div><div><div>                synchronized (mNotificationList) {</div><div>                        NotificationRecord r = mNotificationList.get(index);</div><div>                        mNotificationList.remove(index);</div><div><br /></div><div>                        cancelNotificationLocked(r, sendDelete, reason);</div><div>                    }</div></div></div></div></foreignObject><text x="174" y="61" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 750 892 L 750 902 Q 750 912 760 912 L 1350 912 Q 1360 912 1360 902 L 1360 680 Q 1360 670 1370 670 L 1498.63 670" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 1503.88 670 L 1496.88 673.5 L 1498.63 670 L 1496.88 666.5 Z" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="none"/><path d="M -10 522 L 1030 522" fill="none" stroke="#666666" stroke-width="4" stroke-miterlimit="10" transform="rotate(90,510,522)" pointer-events="none"/><g transform="translate(522.5,99.5)rotate(-90,0,0)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="87" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">system_process</div></div></foreignObject><text x="44" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">system_process</text></switch></g><g transform="translate(477.5,94.5)rotate(-90,0,0)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="79" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">com.ezx.probe</div></div></foreignObject><text x="40" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">com.ezx.probe</text></switch></g><path d="M 675 737 L 2145 737" fill="none" stroke="#666666" stroke-width="4" stroke-miterlimit="10" transform="rotate(90,1410,737)" pointer-events="none"/><g transform="translate(1422.5,131.5)rotate(-90,0,0)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="117" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">com.android.systemui</div></div></foreignObject><text x="59" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">com.android.systemui</text></switch></g><g transform="translate(1382.5,116.5)rotate(-90,0,0)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="87" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">system_process</div></div></foreignObject><text x="44" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">system_process</text></switch></g><path d="M 1555 722 L 1555 825.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1555 830.88 L 1551.5 823.88 L 1555 825.63 L 1558.5 823.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1655 722 L 1655 745.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1655 750.88 L 1651.5 743.88 L 1655 745.63 L 1658.5 743.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1506.5,658.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="569" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.service.notification.NotificationListenerService.NotificationListenerWrapper#onNotificationRemoved</font><br /></div><div><div><div><font color="#7ea6e0">        public void onNotificationRemoved(IStatusBarNotificationHolder sbnHolder,</font></div><div><font color="#7ea6e0">                NotificationRankingUpdate update) {</font></div></div><div><div>                sbn = sbnHolder.get();</div></div></div></div></div></foreignObject><text x="285" y="33" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 1555 1017 L 1555 1045.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1555 1050.88 L 1551.5 1043.88 L 1555 1045.63 L 1558.5 1043.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1506.5,938.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="440" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.service.notification.NotificationListenerService.MyHandler#handleMessage</font><br /></div><div><div><div><font color="#7ea6e0">        public void handleMessage(Message msg) {</font></div></div><div><div>                case <font color="#006600">MSG_ON_NOTIFICATION_REMOVED</font>: {</div><div>                    onNotificationRemoved(sbn, rankingMap);</div><div><span>                } break;</span><br /></div></div></div></div></div></foreignObject><text x="220" y="40" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 1555 1187 L 1555 1213.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 1555 1218.88 L 1551.5 1211.88 L 1555 1213.63 L 1558.5 1211.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1506.5,1058.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="426" height="124" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">android.service.notification.NotificationListenerService#onNotificationRemoved()</font><br /></div><div><div><div><font color="#7ea6e0">        public void onNotificationRemoved(StatusBarNotification sbn,</font></div><div><font color="#7ea6e0">                final RankingMap rankingMap) {</font></div></div><div><div>                mHandler.post(new Runnable() {</div><div>                    @Override</div><div>                    public void run() {</div><div>                        removeNotification(null,key, rankingMap);</div><div>                    }</div><div>                });</div></div></div></div></div></foreignObject><text x="213" y="68" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 1555 1270 L 1555 1295.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1555 1300.88 L 1551.5 1293.88 L 1555 1295.63 L 1558.5 1293.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1506.5,1226.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="555" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.android.systemui.statusbar.phone.PhoneStatusBar#removeNotification()</font><br /></div><div><div><div><font color="#7ea6e0">    public void removeNotification(final ExpandableNotificationRow row,String key, RankingMap ranking) {</font></div><div><div>        StatusBarNotification old = removeNotificationViews(key,onlyRemoveView,ranking);</div></div></div></div><div><br /></div></div></div></foreignObject><text x="278" y="33" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(1506.5,1308.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="895" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.android.systemui.statusbar.BaseStatusBar#removeNotificationViews(java.lang.String, boolean, android.service.notification.NotificationListenerService.RankingMap)</font><br /></div><div><div><div><font color="#7ea6e0">    protected StatusBarNotification removeNotificationViews(String key,boolean onlyRemoveView,RankingMap ranking) {</font></div><div><div>        NotificationData.Entry entry = mNotificationData.remove(key, ranking);</div></div></div></div><div><div>        updateNotifications();</div></div></div></div></foreignObject><text x="448" y="33" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 650 622 L 650 640.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 650 645.88 L 646.5 638.88 L 650 640.63 L 653.5 638.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(601.5,573.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="504" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.android.server.notification.NotificationManagerService#cancelNotificationLocked</font><br /></div><div><div><font color="#7ea6e0">    private void cancelNotificationLocked(NotificationRecord r, boolean sendDelete, int reason) {</font></div><div><div>            mListeners.notifyRemovedLocked(r.sbn);</div></div></div></div></div></foreignObject><text x="252" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 650 772 L 650 795.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 650 800.88 L 646.5 793.88 L 650 795.63 L 653.5 793.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(601.5,653.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="550" height="110" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.android.server.notification.NotificationManagerService.NotificationListeners#notifyRemovedLocked</font><br /></div><div><div><font color="#7ea6e0">        public void notifyRemovedLocked(StatusBarNotification sbn) {</font></div><div><div>                mHandler.post(new Runnable() {</div><div>                    @Override</div><div>                    public void run() {</div><div>                        notifyRemoved(info, sbnLight, update);</div><div>                    }</div><div>                });</div></div></div></div></div></foreignObject><text x="275" y="61" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(601.5,808.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="511" height="82" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">com.android.server.notification.NotificationManagerService.NotificationListeners#notifyRemoved</font><br /></div><div><div><div><font color="#7ea6e0">        private void notifyRemoved(ManagedServiceInfo info, StatusBarNotification sbn,</font></div><div><font color="#7ea6e0">                NotificationRankingUpdate rankingUpdate) {</font></div></div><div><div>            final INotificationListener listener = (INotificationListener) info.service;</div><div>            StatusBarNotificationHolder sbnHolder = new StatusBarNotificationHolder(sbn);</div><div><b>                listener.onNotificationRemoved(sbnHolder, rankingUpdate);</b></div></div></div></div></div></foreignObject><text x="256" y="47" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 1555 902 L 1555 925.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1555 930.88 L 1551.5 923.88 L 1555 925.63 L 1558.5 923.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1506.5,838.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="467" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div>            synchronized (mLock) {</div><div><div>                mHandler.obtainMessage(MyHandler.MSG_ON_NOTIFICATION_REMOVED,</div><div>                        args).sendToTarget();</div></div><div>            }</div></div></div></foreignObject><text x="234" y="33" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 1605 777 L 1450 777 Q 1440 777 1440 787 L 1440 962 Q 1440 972 1430 972 L 760 972 Q 750 972 750 982 L 750 995.63" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 750 1000.88 L 746.5 993.88 L 750 995.63 L 753.5 993.88 Z" fill="none" stroke="#666666" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(1606.5,758.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="754" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/src/core/java/android/service/notification/IStatusBarNotificationHolder.java</font><br /></div><div><div><div><div><font color="#7ea6e0">@Override public android.service.notification.StatusBarNotification get() throws android.os.RemoteException</font></div></div></div><div><div>mRemote.transact(Stub.<font color="#006600">TRANSACTION_get</font>, _data, _reply, 0);</div></div></div></div></div></foreignObject><text x="377" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 750 1082 L 750 1105.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 750 1110.88 L 746.5 1103.88 L 750 1105.63 L 753.5 1103.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 650 1082 L 650 1190.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 650 1195.88 L 646.5 1188.88 L 650 1190.63 L 653.5 1188.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(601.5,1008.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="754" height="82" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/src/core/java/android/service/notification/IStatusBarNotificationHolder.java</font><br /></div><div><div><div><font color="#7ea6e0">@Override public boolean onTransact(int code, android.os.Parcel data, android.os.Parcel reply, int flags) throws android.os.RemoteException</font></div></div><div><div>case <font color="#006600">TRANSACTION_get</font>:</div><div>{</div><div>android.service.notification.StatusBarNotification _result = this.get();</div><div><br /></div></div></div></div></div></foreignObject><text x="377" y="47" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(701.5,1118.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="533" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><font color="#7ea6e0">frameworks/base/services/core/java/com/android/server/notification/NotificationManagerService.java</font><br /></div><div><div><font color="#7ea6e0">        public StatusBarNotification get() {</font></div><div><div>            StatusBarNotification value = mValue;</div><div>            mValue = null;</div><div>            return value;</div></div></div></div></div></foreignObject><text x="267" y="40" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(601.5,1203.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="499" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div><div><div>_result.writeToParcel(reply, android.os.Parcelable.PARCELABLE_WRITE_RETURN_VALUE);</div></div></div></div></div></foreignObject><text x="250" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">&lt;div&gt;&lt;div&gt;&lt;div&gt;_result.writeToParcel(reply, android.os.Parcelable.PARCELABLE_WRITE_RETURN_VALUE);&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</text></switch></g><g transform="translate(1.5,7.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="232" height="28" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 25px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 233px; white-space: nowrap; word-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Notification -- Cancel</div></div></foreignObject><text x="116" y="27" fill="#000000" text-anchor="middle" font-size="25px" font-family="Helvetica">Notification -- Cancel</text></switch></g><g transform="translate(1.5,48.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="89" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 90px; white-space: nowrap; word-wrap: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><span>process diagram</span></div></div></foreignObject><text x="45" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">&lt;span&gt;process diagram&lt;/span&gt;</text></switch></g></g></svg>


## 流程说明

上图描述了一个notification从发出到现实的全部过程，横跨三个进程。下面将逐个描述图中的各个关注点。

### Stage标签说明
#### Stage 1

从`com.android.messaging`进程调用`system_process`进程的`enqueueNotificationWithTag()`方法，在系统进程中开始正式处理`Notification`的请求。
第一阶段便是要检查请求的`Notification`是否合法。

一般包含如下三个检查点：
[NotificationManagerService.java#2031](http://androidxref.com/6.0.1_r10/xref/frameworks/base/services/core/java/com/android/server/notification/NotificationManagerService.java#2031)

1. 是否达到最大`notification`的个数
```java
// Limit the number of notifications that any given package except the android
// package or a registered listener can enqueue.  Prevents DOS attacks and deals with leaks.
```

2. 包名，notification对象
```java
if (pkg == null || notification == null) {
    throw new IllegalArgumentException("null not allowed: pkg=" + pkg + " id=" + id + " notification=" + notification);
}
```

3. notification的图标
```java
if (notification.getSmallIcon() != null) {
    if (!notification.isValid()) {
        throw new IllegalArgumentException("Invalid notification (): pkg=" + pkg + " id=" + id + " notification=" + notification);
    }
}
```






















